import{_ as re}from"./Input.2f71d7f1.js";import{_ as ue,r as a,V as ce,D as ie,I as de,L as me,M as G,O as ve,c as s,a as t,b as v,w as _e,j as l,F,P as U,o,Q as $,t as I,s as fe,W as pe,l as he,p as ke,f as xe}from"./entry.3468b0cd.js";import{_ as ge,a as ye,b as we,c as Ce,d as be,e as Pe,f as Ve,g as Ne,h as Ae,i as Re,j as Ye,k as Be,l as je}from"./phone-red.326303c3.js";import{a as p}from"./axios.28bc18a3.js";const S=h=>(ke("data-v-927d1d8a"),h=h(),xe(),h),De={class:"flex m-2 flex-col font-gost"},Me={class:"flex flex-col"},Te={class:"flex justify-center flex-col items-center p-6"},Ge={class:"m-2 flex flex-col"},Fe={class:"flex flex-row"},Ue={class:"pr-2"},$e={class:"pr-2"},Ie={class:"flex flex-row"},Se={class:"pr-2"},He={class:"w-full justify-between flex mt-4"},Le={class:"flex flex-col mx-4 2xl:mx-0"},Ee={class:"flex flex-col items-center"},Oe={key:0},ze={key:1,class:"w-full flex flex-col-reverse justify-center"},Qe=S(()=>t("span",{class:"self-center text-5xl font-black"},"+",-1)),We=[Qe],qe={class:"text-2xl outline-2 rounded-3xl flex justify-center items-center cursor-pointer flex-col dark:bg-gray-800 w-60 mb-4"},Je=["onClick"],Ke={key:0,class:"grid 2xl:grid-cols-12 xl:grid-cols-10 grid-cols-6 w-full place-items-center justify-center"},Xe=["onClick"],Ze=["onClick"],es=S(()=>t("span",{class:"text-center text-6xl"},"+",-1)),ss=[es],os={__name:"index",setup(h){const b=a(!1);a(!1);const _=a(!1),P=ce();ie({get(){return P.value==="dark"},set(){P.preference=P.value==="dark"?"light":"dark"}});const k=a([]),j=a(!0),D=a(null),x=a(0),M=a(0),c=a("NoData"),i=a("NoData"),d=a("NoData"),m=a("NoData"),g=a("NoData"),y=a("NoData"),V=()=>{c.value==="unknown"?c.value="Yes":c.value==="Yes"?c.value="No":c.value="unknown"},N=()=>{m.value==="unknown"?m.value="Yes":m.value==="Yes"?m.value="No":m.value="unknown"},A=()=>{i.value==="unknown"?i.value="Yes":i.value==="Yes"?i.value="No":i.value="unknown"},R=()=>{d.value==="unknown"?d.value="Yes":d.value==="Yes"?d.value="No":d.value="unknown"};de(async()=>{typeof me("token").value=="string"?(b.value=!0,w()):G("/login")});const w=()=>{p.get("/api/floors").then(n=>{const e=n.data.body.sort((r,C)=>r.floor_number-C.floor_number);k.value=e,j.value=!1})},H=()=>{p.post("/api/floors").then(n=>{w()})},L=n=>{G(`/floor?floor_number=${n+1}`),pe({path:`/floor?floor_number=${n+1}`,ttl:1e3})},E=n=>{p.put("/api/rooms/create",{floor_number:n+1}).then(e=>{w()})},O=(n,e)=>{M.value=n,e=k.value[n].rooms[e].room_number,p.post("/api/rooms/info",{floor_number:n,room_number:e}).then(r=>{m.value=r.data.hasAccessPoint,d.value=r.data.hasBathPhone,i.value=r.data.hasPhone,c.value=r.data.hasTV,g.value=r.data.comment,y.value=r.data.macAddress}),x.value=e,_.value=!0},z=()=>{p.post("/api/rooms/modify",{floor_number:M.value,room_number:x.value,hasAccessPoint:m.value,hasBathPhone:d.value,hasPhone:i.value,hasTV:c.value,comment:g.value,macAddress:y.value}).then(n=>{w(),_.value=!1})},Q=n=>{let e=k.value[D.value].rooms[n];return e.hasTV==="unknown"&&e.hasPhone==="unknown"&&e.hasBathPhone==="unknown"&&e.hasAccessPoint==="unknown"?"bg-gray-500":e.hasTV==="Yes"&&e.hasPhone==="Yes"&&e.hasBathPhone==="Yes"&&e.hasAccessPoint==="Yes"?"bg-green-500":"bg-red-500"},W=()=>c.value==="Yes",q=()=>c.value==="unknown",J=()=>c.value==="No",K=()=>i.value==="Yes",X=()=>i.value==="unknown",Z=()=>i.value==="No",ee=()=>d.value==="Yes",se=()=>d.value==="unknown",oe=()=>d.value==="No",te=()=>m.value==="Yes",ne=()=>m.value==="unknown",ae=()=>m.value==="No";return(n,e)=>{const r=re,C=he,le=ge,T=ve("maska");return o(),s("div",De,[t("div",Me,[v(le,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=u=>_.value=u),class:"w-60",ui:{container:"items-start"}},{default:_e(()=>[t("div",Te,[$(v(r,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=u=>x.value=u),"data-maska":"#####",class:"text-xl w-24 mb-2",placeholder:"Room number"},null,8,["modelValue"]),[[T]]),$(v(r,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=u=>y.value=u),"data-maska":"**:**:**:**:**:**",placeholder:"MAC:Address"},null,8,["modelValue"]),[[T]]),t("div",Ge,[t("div",Fe,[t("div",Ue,[te()?(o(),s("img",{key:0,src:ye,onClick:N,class:"cursor-pointer"})):l("",!0),ne()?(o(),s("img",{key:1,src:we,onClick:N,class:"cursor-pointer"})):l("",!0),ae()?(o(),s("img",{key:2,src:Ce,onClick:N,class:"cursor-pointer"})):l("",!0)]),t("div",$e,[W()?(o(),s("img",{key:0,src:be,onClick:V,class:"cursor-pointer"})):l("",!0),q()?(o(),s("img",{key:1,src:Pe,onClick:V,class:"cursor-pointer"})):l("",!0),J()?(o(),s("img",{key:2,src:Ve,onClick:V,class:"cursor-pointer"})):l("",!0)])]),t("div",Ie,[t("div",Se,[ee()?(o(),s("img",{key:0,src:Ne,onClick:R,class:"cursor-pointer"})):l("",!0),se()?(o(),s("img",{key:1,src:Ae,onClick:R,class:"cursor-pointer"})):l("",!0),oe()?(o(),s("img",{key:2,src:Re,onClick:R,class:"cursor-pointer"})):l("",!0)]),t("div",null,[K()?(o(),s("img",{key:0,src:Ye,onClick:A,class:"cursor-pointer"})):l("",!0),X()?(o(),s("img",{key:1,src:Be,onClick:A,class:"cursor-pointer"})):l("",!0),Z()?(o(),s("img",{key:2,src:je,onClick:A,class:"cursor-pointer"})):l("",!0)])])]),t("div",He,[v(C,{label:"Submit",onClick:z}),t("div",Le,[v(r,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=u=>g.value=u),placeholder:"Comment",class:"pb-2"},null,8,["modelValue"])]),v(C,{label:"Cancel",color:"red",onClick:e[3]||(e[3]=u=>_.value=!1)})])])]),_:1},8,["modelValue"])]),t("div",Ee,[j.value&&b.value?(o(),s("div",Oe,"Loading...")):(o(),s("div",ze,[b.value?(o(),s("div",{key:0,class:"text-2xl rounded-3xl flex text-center justify-center h-16 items-center cursor-pointer",onClick:H},We)):l("",!0),(o(!0),s(F,null,U(k.value,(u,f)=>(o(),s("div",{key:f},[t("div",qe,[t("span",{class:"self-center my-4 prevent_select",onClick:Y=>L(f)},"PiÄ™tro "+I(u.floor_number),9,Je),D.value===f?(o(),s("div",Ke,[(o(!0),s(F,null,U(u.rooms,(Y,B)=>(o(),s("div",{key:B,class:fe(["mb-3 room-card text-white flex items-center justify-center rounded-lg cursor-pointer w-12 h-12 xl:w-24 xl:h-24 text-sm xl:text-sm 2xl:text-2xl flex-grow bg-gray-500",Q(B)]),onClick:ts=>O(f,B)},I(Y.room_number),11,Xe))),128)),t("div",{class:"xl:w-24 xl:h-24 w-12 h-12 mb-6 room-card bg-gray-500 text-white flex items-center justify-center rounded-lg cursor-pointer",onClick:Y=>E(f)},ss,8,Ze)])):l("",!0)])]))),128))]))])])}}},us=ue(os,[["__scopeId","data-v-927d1d8a"]]);export{us as default};
