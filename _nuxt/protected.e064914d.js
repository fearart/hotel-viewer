import{ab as Xn,L as kn,M as vr,ac as qn,ad as Kn}from"./entry.f456d439.js";import{g as Wn,a as Yn,m as Jn}from"./browser.umd.3719f3a5.js";var ne={},Or={exports:{}},Le={},Qe={};Qe.byteLength=Qn;Qe.toByteArray=ri;Qe.fromByteArray=ii;var re=[],W=[],zn=typeof Uint8Array<"u"?Uint8Array:Array,wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var me=0,Zn=wr.length;me<Zn;++me)re[me]=wr[me],W[wr.charCodeAt(me)]=me;W["-".charCodeAt(0)]=62;W["_".charCodeAt(0)]=63;function qt(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=r);var s=t===r?0:4-t%4;return[t,s]}function Qn(e){var r=qt(e),t=r[0],s=r[1];return(t+s)*3/4-s}function ei(e,r,t){return(r+t)*3/4-t}function ri(e){var r,t=qt(e),s=t[0],o=t[1],f=new zn(ei(e,s,o)),p=0,c=o>0?s-4:s,l;for(l=0;l<c;l+=4)r=W[e.charCodeAt(l)]<<18|W[e.charCodeAt(l+1)]<<12|W[e.charCodeAt(l+2)]<<6|W[e.charCodeAt(l+3)],f[p++]=r>>16&255,f[p++]=r>>8&255,f[p++]=r&255;return o===2&&(r=W[e.charCodeAt(l)]<<2|W[e.charCodeAt(l+1)]>>4,f[p++]=r&255),o===1&&(r=W[e.charCodeAt(l)]<<10|W[e.charCodeAt(l+1)]<<4|W[e.charCodeAt(l+2)]>>2,f[p++]=r>>8&255,f[p++]=r&255),f}function ti(e){return re[e>>18&63]+re[e>>12&63]+re[e>>6&63]+re[e&63]}function ni(e,r,t){for(var s,o=[],f=r;f<t;f+=3)s=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),o.push(ti(s));return o.join("")}function ii(e){for(var r,t=e.length,s=t%3,o=[],f=16383,p=0,c=t-s;p<c;p+=f)o.push(ni(e,p,p+f>c?c:p+f));return s===1?(r=e[t-1],o.push(re[r>>2]+re[r<<4&63]+"==")):s===2&&(r=(e[t-2]<<8)+e[t-1],o.push(re[r>>10]+re[r>>4&63]+re[r<<2&63]+"=")),o.join("")}var Pr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Pr.read=function(e,r,t,s,o){var f,p,c=o*8-s-1,l=(1<<c)-1,m=l>>1,y=-7,E=t?o-1:0,T=t?-1:1,v=e[r+E];for(E+=T,f=v&(1<<-y)-1,v>>=-y,y+=c;y>0;f=f*256+e[r+E],E+=T,y-=8);for(p=f&(1<<-y)-1,f>>=-y,y+=s;y>0;p=p*256+e[r+E],E+=T,y-=8);if(f===0)f=1-m;else{if(f===l)return p?NaN:(v?-1:1)*(1/0);p=p+Math.pow(2,s),f=f-m}return(v?-1:1)*p*Math.pow(2,f-s)};Pr.write=function(e,r,t,s,o,f){var p,c,l,m=f*8-o-1,y=(1<<m)-1,E=y>>1,T=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=s?0:f-1,w=s?1:-1,B=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,p=y):(p=Math.floor(Math.log(r)/Math.LN2),r*(l=Math.pow(2,-p))<1&&(p--,l*=2),p+E>=1?r+=T/l:r+=T*Math.pow(2,1-E),r*l>=2&&(p++,l/=2),p+E>=y?(c=0,p=y):p+E>=1?(c=(r*l-1)*Math.pow(2,o),p=p+E):(c=r*Math.pow(2,E-1)*Math.pow(2,o),p=0));o>=8;e[t+v]=c&255,v+=w,c/=256,o-=8);for(p=p<<o|c,m+=o;m>0;e[t+v]=p&255,v+=w,p/=256,m-=8);e[t+v-w]|=B*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var r=Qe,t=Pr,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=U,e.INSPECT_MAX_BYTES=50;var o=2147483647;e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=f(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{var a=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(a,n),a.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function p(a){if(a>o)throw new RangeError('The value "'+a+'" is invalid for option "size"');var n=new Uint8Array(a);return Object.setPrototypeOf(n,c.prototype),n}function c(a,n,i){if(typeof a=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(a)}return l(a,n,i)}c.poolSize=8192;function l(a,n,i){if(typeof a=="string")return T(a,n);if(ArrayBuffer.isView(a))return w(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(Q(a,ArrayBuffer)||a&&Q(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Q(a,SharedArrayBuffer)||a&&Q(a.buffer,SharedArrayBuffer)))return B(a,n,i);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var u=a.valueOf&&a.valueOf();if(u!=null&&u!==a)return c.from(u,n,i);var h=V(a);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return c.from(a[Symbol.toPrimitive]("string"),n,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}c.from=function(a,n,i){return l(a,n,i)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function m(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function y(a,n,i){return m(a),a<=0?p(a):n!==void 0?typeof i=="string"?p(a).fill(n,i):p(a).fill(n):p(a)}c.alloc=function(a,n,i){return y(a,n,i)};function E(a){return m(a),p(a<0?0:K(a)|0)}c.allocUnsafe=function(a){return E(a)},c.allocUnsafeSlow=function(a){return E(a)};function T(a,n){if((typeof n!="string"||n==="")&&(n="utf8"),!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i=q(a,n)|0,u=p(i),h=u.write(a,n);return h!==i&&(u=u.slice(0,h)),u}function v(a){for(var n=a.length<0?0:K(a.length)|0,i=p(n),u=0;u<n;u+=1)i[u]=a[u]&255;return i}function w(a){if(Q(a,Uint8Array)){var n=new Uint8Array(a);return B(n.buffer,n.byteOffset,n.byteLength)}return v(a)}function B(a,n,i){if(n<0||a.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<n+(i||0))throw new RangeError('"length" is outside of buffer bounds');var u;return n===void 0&&i===void 0?u=new Uint8Array(a):i===void 0?u=new Uint8Array(a,n):u=new Uint8Array(a,n,i),Object.setPrototypeOf(u,c.prototype),u}function V(a){if(c.isBuffer(a)){var n=K(a.length)|0,i=p(n);return i.length===0||a.copy(i,0,0,n),i}if(a.length!==void 0)return typeof a.length!="number"||gr(a.length)?p(0):v(a);if(a.type==="Buffer"&&Array.isArray(a.data))return v(a.data)}function K(a){if(a>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return a|0}function U(a){return+a!=a&&(a=0),c.alloc(+a)}c.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==c.prototype},c.compare=function(n,i){if(Q(n,Uint8Array)&&(n=c.from(n,n.offset,n.byteLength)),Q(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),!c.isBuffer(n)||!c.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===i)return 0;for(var u=n.length,h=i.length,d=0,g=Math.min(u,h);d<g;++d)if(n[d]!==i[d]){u=n[d],h=i[d];break}return u<h?-1:h<u?1:0},c.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(n,i){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return c.alloc(0);var u;if(i===void 0)for(i=0,u=0;u<n.length;++u)i+=n[u].length;var h=c.allocUnsafe(i),d=0;for(u=0;u<n.length;++u){var g=n[u];if(Q(g,Uint8Array))d+g.length>h.length?c.from(g).copy(h,d):Uint8Array.prototype.set.call(h,g,d);else if(c.isBuffer(g))g.copy(h,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=g.length}return h};function q(a,n){if(c.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||Q(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var i=a.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&i===0)return 0;for(var h=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return dr(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return et(a).length;default:if(h)return u?-1:dr(a).length;n=(""+n).toLowerCase(),h=!0}}c.byteLength=q;function lr(a,n,i){var u=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,n>>>=0,i<=n))return"";for(a||(a="utf8");;)switch(a){case"hex":return N(this,n,i);case"utf8":case"utf-8":return S(this,n,i);case"ascii":return b(this,n,i);case"latin1":case"binary":return A(this,n,i);case"base64":return $(this,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,n,i);default:if(u)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),u=!0}}c.prototype._isBuffer=!0;function se(a,n,i){var u=a[n];a[n]=a[i],a[i]=u}c.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<n;i+=2)se(this,i,i+1);return this},c.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<n;i+=4)se(this,i,i+3),se(this,i+1,i+2);return this},c.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<n;i+=8)se(this,i,i+7),se(this,i+1,i+6),se(this,i+2,i+5),se(this,i+3,i+4);return this},c.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?S(this,0,n):lr.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(n){if(!c.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:c.compare(this,n)===0},c.prototype.inspect=function(){var n="",i=e.INSPECT_MAX_BYTES;return n=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(n+=" ... "),"<Buffer "+n+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(n,i,u,h,d){if(Q(n,Uint8Array)&&(n=c.from(n,n.offset,n.byteLength)),!c.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(i===void 0&&(i=0),u===void 0&&(u=n?n.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),i<0||u>n.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&i>=u)return 0;if(h>=d)return-1;if(i>=u)return 1;if(i>>>=0,u>>>=0,h>>>=0,d>>>=0,this===n)return 0;for(var g=d-h,O=u-i,j=Math.min(g,O),C=this.slice(h,d),X=n.slice(i,u),G=0;G<j;++G)if(C[G]!==X[G]){g=C[G],O=X[G];break}return g<O?-1:O<g?1:0};function Be(a,n,i,u,h){if(a.length===0)return-1;if(typeof i=="string"?(u=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,gr(i)&&(i=h?0:a.length-1),i<0&&(i=a.length+i),i>=a.length){if(h)return-1;i=a.length-1}else if(i<0)if(h)i=0;else return-1;if(typeof n=="string"&&(n=c.from(n,u)),c.isBuffer(n))return n.length===0?-1:je(a,n,i,u,h);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(a,n,i):Uint8Array.prototype.lastIndexOf.call(a,n,i):je(a,[n],i,u,h);throw new TypeError("val must be string, number or Buffer")}function je(a,n,i,u,h){var d=1,g=a.length,O=n.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(a.length<2||n.length<2)return-1;d=2,g/=2,O/=2,i/=2}function j(rt,tt){return d===1?rt[tt]:rt.readUInt16BE(tt*d)}var C;if(h){var X=-1;for(C=i;C<g;C++)if(j(a,C)===j(n,X===-1?0:C-X)){if(X===-1&&(X=C),C-X+1===O)return X*d}else X!==-1&&(C-=C-X),X=-1}else for(i+O>g&&(i=g-O),C=i;C>=0;C--){for(var G=!0,Ce=0;Ce<O;Ce++)if(j(a,C+Ce)!==j(n,Ce)){G=!1;break}if(G)return C}return-1}c.prototype.includes=function(n,i,u){return this.indexOf(n,i,u)!==-1},c.prototype.indexOf=function(n,i,u){return Be(this,n,i,u,!0)},c.prototype.lastIndexOf=function(n,i,u){return Be(this,n,i,u,!1)};function hr(a,n,i,u){i=Number(i)||0;var h=a.length-i;u?(u=Number(u),u>h&&(u=h)):u=h;var d=n.length;u>d/2&&(u=d/2);for(var g=0;g<u;++g){var O=parseInt(n.substr(g*2,2),16);if(gr(O))return g;a[i+g]=O}return g}function pr(a,n,i,u){return Pe(dr(n,a.length-i),a,i,u)}function mr(a,n,i,u){return Pe(Mn(n),a,i,u)}function yr(a,n,i,u){return Pe(et(n),a,i,u)}function Er(a,n,i,u){return Pe(Vn(n,a.length-i),a,i,u)}c.prototype.write=function(n,i,u,h){if(i===void 0)h="utf8",u=this.length,i=0;else if(u===void 0&&typeof i=="string")h=i,u=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(u)?(u=u>>>0,h===void 0&&(h="utf8")):(h=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-i;if((u===void 0||u>d)&&(u=d),n.length>0&&(u<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");for(var g=!1;;)switch(h){case"hex":return hr(this,n,i,u);case"utf8":case"utf-8":return pr(this,n,i,u);case"ascii":case"latin1":case"binary":return mr(this,n,i,u);case"base64":return yr(this,n,i,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Er(this,n,i,u);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),g=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(a,n,i){return n===0&&i===a.length?r.fromByteArray(a):r.fromByteArray(a.slice(n,i))}function S(a,n,i){i=Math.min(a.length,i);for(var u=[],h=n;h<i;){var d=a[h],g=null,O=d>239?4:d>223?3:d>191?2:1;if(h+O<=i){var j,C,X,G;switch(O){case 1:d<128&&(g=d);break;case 2:j=a[h+1],(j&192)===128&&(G=(d&31)<<6|j&63,G>127&&(g=G));break;case 3:j=a[h+1],C=a[h+2],(j&192)===128&&(C&192)===128&&(G=(d&15)<<12|(j&63)<<6|C&63,G>2047&&(G<55296||G>57343)&&(g=G));break;case 4:j=a[h+1],C=a[h+2],X=a[h+3],(j&192)===128&&(C&192)===128&&(X&192)===128&&(G=(d&15)<<18|(j&63)<<12|(C&63)<<6|X&63,G>65535&&G<1114112&&(g=G))}}g===null?(g=65533,O=1):g>65535&&(g-=65536,u.push(g>>>10&1023|55296),g=56320|g&1023),u.push(g),h+=O}return x(u)}var R=4096;function x(a){var n=a.length;if(n<=R)return String.fromCharCode.apply(String,a);for(var i="",u=0;u<n;)i+=String.fromCharCode.apply(String,a.slice(u,u+=R));return i}function b(a,n,i){var u="";i=Math.min(a.length,i);for(var h=n;h<i;++h)u+=String.fromCharCode(a[h]&127);return u}function A(a,n,i){var u="";i=Math.min(a.length,i);for(var h=n;h<i;++h)u+=String.fromCharCode(a[h]);return u}function N(a,n,i){var u=a.length;(!n||n<0)&&(n=0),(!i||i<0||i>u)&&(i=u);for(var h="",d=n;d<i;++d)h+=Hn[a[d]];return h}function F(a,n,i){for(var u=a.slice(n,i),h="",d=0;d<u.length-1;d+=2)h+=String.fromCharCode(u[d]+u[d+1]*256);return h}c.prototype.slice=function(n,i){var u=this.length;n=~~n,i=i===void 0?u:~~i,n<0?(n+=u,n<0&&(n=0)):n>u&&(n=u),i<0?(i+=u,i<0&&(i=0)):i>u&&(i=u),i<n&&(i=n);var h=this.subarray(n,i);return Object.setPrototypeOf(h,c.prototype),h};function I(a,n,i){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+n>i)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(n,i,u){n=n>>>0,i=i>>>0,u||I(n,i,this.length);for(var h=this[n],d=1,g=0;++g<i&&(d*=256);)h+=this[n+g]*d;return h},c.prototype.readUintBE=c.prototype.readUIntBE=function(n,i,u){n=n>>>0,i=i>>>0,u||I(n,i,this.length);for(var h=this[n+--i],d=1;i>0&&(d*=256);)h+=this[n+--i]*d;return h},c.prototype.readUint8=c.prototype.readUInt8=function(n,i){return n=n>>>0,i||I(n,1,this.length),this[n]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(n,i){return n=n>>>0,i||I(n,2,this.length),this[n]|this[n+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(n,i){return n=n>>>0,i||I(n,2,this.length),this[n]<<8|this[n+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(n,i){return n=n>>>0,i||I(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(n,i){return n=n>>>0,i||I(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},c.prototype.readIntLE=function(n,i,u){n=n>>>0,i=i>>>0,u||I(n,i,this.length);for(var h=this[n],d=1,g=0;++g<i&&(d*=256);)h+=this[n+g]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*i)),h},c.prototype.readIntBE=function(n,i,u){n=n>>>0,i=i>>>0,u||I(n,i,this.length);for(var h=i,d=1,g=this[n+--h];h>0&&(d*=256);)g+=this[n+--h]*d;return d*=128,g>=d&&(g-=Math.pow(2,8*i)),g},c.prototype.readInt8=function(n,i){return n=n>>>0,i||I(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},c.prototype.readInt16LE=function(n,i){n=n>>>0,i||I(n,2,this.length);var u=this[n]|this[n+1]<<8;return u&32768?u|4294901760:u},c.prototype.readInt16BE=function(n,i){n=n>>>0,i||I(n,2,this.length);var u=this[n+1]|this[n]<<8;return u&32768?u|4294901760:u},c.prototype.readInt32LE=function(n,i){return n=n>>>0,i||I(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},c.prototype.readInt32BE=function(n,i){return n=n>>>0,i||I(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},c.prototype.readFloatLE=function(n,i){return n=n>>>0,i||I(n,4,this.length),t.read(this,n,!0,23,4)},c.prototype.readFloatBE=function(n,i){return n=n>>>0,i||I(n,4,this.length),t.read(this,n,!1,23,4)},c.prototype.readDoubleLE=function(n,i){return n=n>>>0,i||I(n,8,this.length),t.read(this,n,!0,52,8)},c.prototype.readDoubleBE=function(n,i){return n=n>>>0,i||I(n,8,this.length),t.read(this,n,!1,52,8)};function L(a,n,i,u,h,d){if(!c.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>h||n<d)throw new RangeError('"value" argument is out of bounds');if(i+u>a.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(n,i,u,h){if(n=+n,i=i>>>0,u=u>>>0,!h){var d=Math.pow(2,8*u)-1;L(this,n,i,u,d,0)}var g=1,O=0;for(this[i]=n&255;++O<u&&(g*=256);)this[i+O]=n/g&255;return i+u},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(n,i,u,h){if(n=+n,i=i>>>0,u=u>>>0,!h){var d=Math.pow(2,8*u)-1;L(this,n,i,u,d,0)}var g=u-1,O=1;for(this[i+g]=n&255;--g>=0&&(O*=256);)this[i+g]=n/O&255;return i+u},c.prototype.writeUint8=c.prototype.writeUInt8=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,1,255,0),this[i]=n&255,i+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,2,65535,0),this[i]=n&255,this[i+1]=n>>>8,i+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,2,65535,0),this[i]=n>>>8,this[i+1]=n&255,i+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,4,4294967295,0),this[i+3]=n>>>24,this[i+2]=n>>>16,this[i+1]=n>>>8,this[i]=n&255,i+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,4,4294967295,0),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4},c.prototype.writeIntLE=function(n,i,u,h){if(n=+n,i=i>>>0,!h){var d=Math.pow(2,8*u-1);L(this,n,i,u,d-1,-d)}var g=0,O=1,j=0;for(this[i]=n&255;++g<u&&(O*=256);)n<0&&j===0&&this[i+g-1]!==0&&(j=1),this[i+g]=(n/O>>0)-j&255;return i+u},c.prototype.writeIntBE=function(n,i,u,h){if(n=+n,i=i>>>0,!h){var d=Math.pow(2,8*u-1);L(this,n,i,u,d-1,-d)}var g=u-1,O=1,j=0;for(this[i+g]=n&255;--g>=0&&(O*=256);)n<0&&j===0&&this[i+g+1]!==0&&(j=1),this[i+g]=(n/O>>0)-j&255;return i+u},c.prototype.writeInt8=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,1,127,-128),n<0&&(n=255+n+1),this[i]=n&255,i+1},c.prototype.writeInt16LE=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,2,32767,-32768),this[i]=n&255,this[i+1]=n>>>8,i+2},c.prototype.writeInt16BE=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,2,32767,-32768),this[i]=n>>>8,this[i+1]=n&255,i+2},c.prototype.writeInt32LE=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,4,2147483647,-2147483648),this[i]=n&255,this[i+1]=n>>>8,this[i+2]=n>>>16,this[i+3]=n>>>24,i+4},c.prototype.writeInt32BE=function(n,i,u){return n=+n,i=i>>>0,u||L(this,n,i,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4};function H(a,n,i,u,h,d){if(i+u>a.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function D(a,n,i,u,h){return n=+n,i=i>>>0,h||H(a,n,i,4),t.write(a,n,i,u,23,4),i+4}c.prototype.writeFloatLE=function(n,i,u){return D(this,n,i,!0,u)},c.prototype.writeFloatBE=function(n,i,u){return D(this,n,i,!1,u)};function ue(a,n,i,u,h){return n=+n,i=i>>>0,h||H(a,n,i,8),t.write(a,n,i,u,52,8),i+8}c.prototype.writeDoubleLE=function(n,i,u){return ue(this,n,i,!0,u)},c.prototype.writeDoubleBE=function(n,i,u){return ue(this,n,i,!1,u)},c.prototype.copy=function(n,i,u,h){if(!c.isBuffer(n))throw new TypeError("argument should be a Buffer");if(u||(u=0),!h&&h!==0&&(h=this.length),i>=n.length&&(i=n.length),i||(i=0),h>0&&h<u&&(h=u),h===u||n.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),n.length-i<h-u&&(h=n.length-i+u);var d=h-u;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,u,h):Uint8Array.prototype.set.call(n,this.subarray(u,h),i),d},c.prototype.fill=function(n,i,u,h){if(typeof n=="string"){if(typeof i=="string"?(h=i,i=0,u=this.length):typeof u=="string"&&(h=u,u=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!c.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(n.length===1){var d=n.charCodeAt(0);(h==="utf8"&&d<128||h==="latin1")&&(n=d)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(i<0||this.length<i||this.length<u)throw new RangeError("Out of range index");if(u<=i)return this;i=i>>>0,u=u===void 0?this.length:u>>>0,n||(n=0);var g;if(typeof n=="number")for(g=i;g<u;++g)this[g]=n;else{var O=c.isBuffer(n)?n:c.from(n,h),j=O.length;if(j===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(g=0;g<u-i;++g)this[g+i]=O[g%j]}return this};var Qr=/[^+/0-9A-Za-z-_]/g;function Gn(a){if(a=a.split("=")[0],a=a.trim().replace(Qr,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function dr(a,n){n=n||1/0;for(var i,u=a.length,h=null,d=[],g=0;g<u;++g){if(i=a.charCodeAt(g),i>55295&&i<57344){if(!h){if(i>56319){(n-=3)>-1&&d.push(239,191,189);continue}else if(g+1===u){(n-=3)>-1&&d.push(239,191,189);continue}h=i;continue}if(i<56320){(n-=3)>-1&&d.push(239,191,189),h=i;continue}i=(h-55296<<10|i-56320)+65536}else h&&(n-=3)>-1&&d.push(239,191,189);if(h=null,i<128){if((n-=1)<0)break;d.push(i)}else if(i<2048){if((n-=2)<0)break;d.push(i>>6|192,i&63|128)}else if(i<65536){if((n-=3)<0)break;d.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((n-=4)<0)break;d.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return d}function Mn(a){for(var n=[],i=0;i<a.length;++i)n.push(a.charCodeAt(i)&255);return n}function Vn(a,n){for(var i,u,h,d=[],g=0;g<a.length&&!((n-=2)<0);++g)i=a.charCodeAt(g),u=i>>8,h=i%256,d.push(h),d.push(u);return d}function et(a){return r.toByteArray(Gn(a))}function Pe(a,n,i,u){for(var h=0;h<u&&!(h+i>=n.length||h>=a.length);++h)n[h+i]=a[h];return h}function Q(a,n){return a instanceof n||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===n.name}function gr(a){return a!==a}var Hn=function(){for(var a="0123456789abcdef",n=new Array(256),i=0;i<16;++i)for(var u=i*16,h=0;h<16;++h)n[u+h]=a[i]+a[h];return n}()})(Le);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,r){var t=Le,s=t.Buffer;function o(p,c){for(var l in p)c[l]=p[l]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=t:(o(t,r),r.Buffer=f);function f(p,c,l){return s(p,c,l)}f.prototype=Object.create(s.prototype),o(s,f),f.from=function(p,c,l){if(typeof p=="number")throw new TypeError("Argument must not be a number");return s(p,c,l)},f.alloc=function(p,c,l){if(typeof p!="number")throw new TypeError("Argument must be a number");var m=s(p);return c!==void 0?typeof l=="string"?m.fill(c,l):m.fill(c):m.fill(0),m},f.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return s(p)},f.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(p)}})(Or,Or.exports);var Oe=Or.exports;const si={},oi=Object.freeze(Object.defineProperty({__proto__:null,default:si},Symbol.toStringTag,{value:"Module"})),ie=Wn(oi);var Xe=Oe.Buffer,ai=ie,ui=ie;function er(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=Xe.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=Xe.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick((function(){this.emit("end",e),this.readable=!1,this.emit("close")}).bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}ui.inherits(er,ai);er.prototype.write=function(r){this.buffer=Xe.concat([this.buffer,Xe.from(r)]),this.emit("data",r)};er.prototype.end=function(r){r&&this.write(r),this.emit("end",r),this.emit("close"),this.writable=!1,this.readable=!1};var Kt=er,Ne=Le.Buffer,Cr=Le.SlowBuffer,fi=ke;function ke(e,r){if(!Ne.isBuffer(e)||!Ne.isBuffer(r)||e.length!==r.length)return!1;for(var t=0,s=0;s<e.length;s++)t|=e[s]^r[s];return t===0}ke.install=function(){Ne.prototype.equal=Cr.prototype.equal=function(r){return ke(this,r)}};var ci=Ne.prototype.equal,li=Cr.prototype.equal;ke.restore=function(){Ne.prototype.equal=ci,Cr.prototype.equal=li};function Sr(e){var r=(e/8|0)+(e%8===0?0:1);return r}var hi={ES256:Sr(256),ES384:Sr(384),ES512:Sr(521)};function pi(e){var r=hi[e];if(r)return r;throw new Error('Unknown algorithm "'+e+'"')}var mi=pi,qe=Oe.Buffer,Wt=mi,Ke=128,Yt=0,yi=32,Ei=16,di=2,Jt=Ei|yi|Yt<<6,We=di|Yt<<6;function gi(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zt(e){if(qe.isBuffer(e))return e;if(typeof e=="string")return qe.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function vi(e,r){e=zt(e);var t=Wt(r),s=t+1,o=e.length,f=0;if(e[f++]!==Jt)throw new Error('Could not find expected "seq"');var p=e[f++];if(p===(Ke|1)&&(p=e[f++]),o-f<p)throw new Error('"seq" specified length of "'+p+'", only "'+(o-f)+'" remaining');if(e[f++]!==We)throw new Error('Could not find expected "int" for "r"');var c=e[f++];if(o-f-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(o-f-2)+'" available');if(s<c)throw new Error('"r" specified length of "'+c+'", max of "'+s+'" is acceptable');var l=f;if(f+=c,e[f++]!==We)throw new Error('Could not find expected "int" for "s"');var m=e[f++];if(o-f!==m)throw new Error('"s" specified length of "'+m+'", expected "'+(o-f)+'"');if(s<m)throw new Error('"s" specified length of "'+m+'", max of "'+s+'" is acceptable');var y=f;if(f+=m,f!==o)throw new Error('Expected to consume entire buffer, but "'+(o-f)+'" bytes remain');var E=t-c,T=t-m,v=qe.allocUnsafe(E+c+T+m);for(f=0;f<E;++f)v[f]=0;e.copy(v,f,l+Math.max(-E,0),l+c),f=t;for(var w=f;f<w+T;++f)v[f]=0;return e.copy(v,f,y+Math.max(-T,0),y+m),v=v.toString("base64"),v=gi(v),v}function nt(e,r,t){for(var s=0;r+s<t&&e[r+s]===0;)++s;var o=e[r+s]>=Ke;return o&&--s,s}function wi(e,r){e=zt(e);var t=Wt(r),s=e.length;if(s!==t*2)throw new TypeError('"'+r+'" signatures must be "'+t*2+'" bytes, saw "'+s+'"');var o=nt(e,0,t),f=nt(e,t,e.length),p=t-o,c=t-f,l=1+1+p+1+1+c,m=l<Ke,y=qe.allocUnsafe((m?2:3)+l),E=0;return y[E++]=Jt,m?y[E++]=l:(y[E++]=Ke|1,y[E++]=l&255),y[E++]=We,y[E++]=p,o<0?(y[E++]=0,E+=e.copy(y,E,0,t)):E+=e.copy(y,E,o,t),y[E++]=We,y[E++]=c,f<0?(y[E++]=0,e.copy(y,E,t)):e.copy(y,E,t+f),y}var Si={derToJose:vi,joseToDer:wi},$i=fi,ve=Oe.Buffer,te=ie,Zt=Si,it=ie,Ai=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Re="secret must be a string or buffer",de="key must be a string or a buffer",Ii="key must be a string, a buffer or an object",Dr=typeof te.createPublicKey=="function";Dr&&(de+=" or a KeyObject",Re+="or a KeyObject");function Qt(e){if(!ve.isBuffer(e)&&typeof e!="string"&&(!Dr||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw J(de)}function en(e){if(!ve.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw J(Ii)}function xi(e){if(!ve.isBuffer(e)){if(typeof e=="string")return e;if(!Dr||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw J(Re)}}function Ur(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rn(e){e=e.toString();var r=4-e.length%4;if(r!==4)for(var t=0;t<r;++t)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function J(e){var r=[].slice.call(arguments,1),t=it.format.bind(it,e).apply(null,r);return new TypeError(t)}function bi(e){return ve.isBuffer(e)||typeof e=="string"}function _e(e){return bi(e)||(e=JSON.stringify(e)),e}function tn(e){return function(t,s){xi(s),t=_e(t);var o=te.createHmac("sha"+e,s),f=(o.update(t),o.digest("base64"));return Ur(f)}}function Ri(e){return function(t,s,o){var f=tn(e)(t,o);return $i(ve.from(s),ve.from(f))}}function nn(e){return function(t,s){en(s),t=_e(t);var o=te.createSign("RSA-SHA"+e),f=(o.update(t),o.sign(s,"base64"));return Ur(f)}}function sn(e){return function(t,s,o){Qt(o),t=_e(t),s=rn(s);var f=te.createVerify("RSA-SHA"+e);return f.update(t),f.verify(o,s,"base64")}}function Ti(e){return function(t,s){en(s),t=_e(t);var o=te.createSign("RSA-SHA"+e),f=(o.update(t),o.sign({key:s,padding:te.constants.RSA_PKCS1_PSS_PADDING,saltLength:te.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Ur(f)}}function Ni(e){return function(t,s,o){Qt(o),t=_e(t),s=rn(s);var f=te.createVerify("RSA-SHA"+e);return f.update(t),f.verify({key:o,padding:te.constants.RSA_PKCS1_PSS_PADDING,saltLength:te.constants.RSA_PSS_SALTLEN_DIGEST},s,"base64")}}function Li(e){var r=nn(e);return function(){var s=r.apply(null,arguments);return s=Zt.derToJose(s,"ES"+e),s}}function Oi(e){var r=sn(e);return function(s,o,f){o=Zt.joseToDer(o,"ES"+e).toString("base64");var p=r(s,o,f);return p}}function _i(){return function(){return""}}function Fi(){return function(r,t){return t===""}}var on=function(r){var t={hs:tn,rs:nn,ps:Ti,es:Li,none:_i},s={hs:Ri,rs:sn,ps:Ni,es:Oi,none:Fi},o=r.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!o)throw J(Ai,r);var f=(o[1]||o[3]).toLowerCase(),p=o[2];return{sign:t[f](p),verify:s[f](p)}},Bi=Le.Buffer,an=function(r){return typeof r=="string"?r:typeof r=="number"||Bi.isBuffer(r)?r.toString():JSON.stringify(r)},ji=Oe.Buffer,st=Kt,Pi=on,Ci=ie,ot=an,Gr=ie;function at(e,r){return ji.from(e,r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Di(e,r,t){t=t||"utf8";var s=at(ot(e),"binary"),o=at(ot(r),t);return Gr.format("%s.%s",s,o)}function un(e){var r=e.header,t=e.payload,s=e.secret||e.privateKey,o=e.encoding,f=Pi(r.alg),p=Di(r,t,o),c=f.sign(p,s);return Gr.format("%s.%s",p,c)}function rr(e){var r=e.secret||e.privateKey||e.key,t=new st(r);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new st(e.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}Gr.inherits(rr,Ci);rr.prototype.sign=function(){try{var r=un({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",r),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};rr.sign=un;var Ui=rr,fn=Oe.Buffer,ut=Kt,Gi=on,Mi=ie,cn=an,Vi=ie,Hi=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Xi(e){return Object.prototype.toString.call(e)==="[object Object]"}function ki(e){if(Xi(e))return e;try{return JSON.parse(e)}catch{return}}function ln(e){var r=e.split(".",1)[0];return ki(fn.from(r,"base64").toString("binary"))}function qi(e){return e.split(".",2).join(".")}function hn(e){return e.split(".")[2]}function Ki(e,r){r=r||"utf8";var t=e.split(".")[1];return fn.from(t,"base64").toString(r)}function pn(e){return Hi.test(e)&&!!ln(e)}function mn(e,r,t){if(!r){var s=new Error("Missing algorithm parameter for jws.verify");throw s.code="MISSING_ALGORITHM",s}e=cn(e);var o=hn(e),f=qi(e),p=Gi(r);return p.verify(f,o,t)}function yn(e,r){if(r=r||{},e=cn(e),!pn(e))return null;var t=ln(e);if(!t)return null;var s=Ki(e);return(t.typ==="JWT"||r.json)&&(s=JSON.parse(s,r.encoding)),{header:t,payload:s,signature:hn(e)}}function Ae(e){e=e||{};var r=e.secret||e.publicKey||e.key,t=new ut(r);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new ut(e.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}Vi.inherits(Ae,Mi);Ae.prototype.verify=function(){try{var r=mn(this.signature.buffer,this.algorithm,this.key.buffer),t=yn(this.signature.buffer,this.encoding);return this.emit("done",r,t),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(s){this.readable=!1,this.emit("error",s),this.emit("close")}};Ae.decode=yn;Ae.isValid=pn;Ae.verify=mn;var Wi=Ae,En=Ui,tr=Wi,Yi=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];ne.ALGORITHMS=Yi;ne.sign=En.sign;ne.verify=tr.verify;ne.decode=tr.decode;ne.isValid=tr.isValid;ne.createSign=function(r){return new En(r)};ne.createVerify=function(r){return new tr(r)};var Ji=ne,dn=function(e,r){r=r||{};var t=Ji.decode(e,r);if(!t)return null;var s=t.payload;if(typeof s=="string")try{var o=JSON.parse(s);o!==null&&typeof o=="object"&&(s=o)}catch{}return r.complete===!0?{header:t.header,payload:s,signature:t.signature}:s},Ye=function(e,r){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,r&&(this.inner=r)};Ye.prototype=Object.create(Error.prototype);Ye.prototype.constructor=Ye;var nr=Ye,gn=nr,Je=function(e,r){gn.call(this,e),this.name="NotBeforeError",this.date=r};Je.prototype=Object.create(gn.prototype);Je.prototype.constructor=Je;var vn=Je,wn=nr,ze=function(e,r){wn.call(this,e),this.name="TokenExpiredError",this.expiredAt=r};ze.prototype=Object.create(wn.prototype);ze.prototype.constructor=ze;var Sn=ze,we=1e3,Se=we*60,$e=Se*60,he=$e*24,zi=he*7,Zi=he*365.25,Qi=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return es(e);if(t==="number"&&isFinite(e))return r.long?ts(e):rs(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function es(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),s=(r[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return t*Zi;case"weeks":case"week":case"w":return t*zi;case"days":case"day":case"d":return t*he;case"hours":case"hour":case"hrs":case"hr":case"h":return t*$e;case"minutes":case"minute":case"mins":case"min":case"m":return t*Se;case"seconds":case"second":case"secs":case"sec":case"s":return t*we;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function rs(e){var r=Math.abs(e);return r>=he?Math.round(e/he)+"d":r>=$e?Math.round(e/$e)+"h":r>=Se?Math.round(e/Se)+"m":r>=we?Math.round(e/we)+"s":e+"ms"}function ts(e){var r=Math.abs(e);return r>=he?De(e,r,he,"day"):r>=$e?De(e,r,$e,"hour"):r>=Se?De(e,r,Se,"minute"):r>=we?De(e,r,we,"second"):e+" ms"}function De(e,r,t,s){var o=r>=t*1.5;return Math.round(e/t)+" "+s+(o?"s":"")}var ns=Qi,$n=function(e,r){var t=r||Math.floor(Date.now()/1e3);if(typeof e=="string"){var s=ns(e);return typeof s>"u"?void 0:Math.floor(t+s/1e3)}else return typeof e=="number"?t+e:void 0},_r={exports:{}};const is="2.0.0",An=256,ss=Number.MAX_SAFE_INTEGER||9007199254740991,os=16,as=An-6,us=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ir={MAX_LENGTH:An,MAX_SAFE_COMPONENT_LENGTH:os,MAX_SAFE_BUILD_LENGTH:as,MAX_SAFE_INTEGER:ss,RELEASE_TYPES:us,SEMVER_SPEC_VERSION:is,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const fs=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var sr=fs;(function(e,r){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:o}=ir,f=sr;r=e.exports={};const p=r.re=[],c=r.safeRe=[],l=r.src=[],m=r.t={};let y=0;const E="[a-zA-Z0-9-]",T=[["\\s",1],["\\d",o],[E,s]],v=B=>{for(const[V,K]of T)B=B.split(`${V}*`).join(`${V}{0,${K}}`).split(`${V}+`).join(`${V}{1,${K}}`);return B},w=(B,V,K)=>{const U=v(V),q=y++;f(B,q,V),m[B]=q,l[q]=V,p[q]=new RegExp(V,K?"g":void 0),c[q]=new RegExp(U,K?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${E}*`),w("MAINVERSION",`(${l[m.NUMERICIDENTIFIER]})\\.(${l[m.NUMERICIDENTIFIER]})\\.(${l[m.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${l[m.NUMERICIDENTIFIERLOOSE]})\\.(${l[m.NUMERICIDENTIFIERLOOSE]})\\.(${l[m.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${l[m.NUMERICIDENTIFIER]}|${l[m.NONNUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${l[m.NUMERICIDENTIFIERLOOSE]}|${l[m.NONNUMERICIDENTIFIER]})`),w("PRERELEASE",`(?:-(${l[m.PRERELEASEIDENTIFIER]}(?:\\.${l[m.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${l[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[m.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${E}+`),w("BUILD",`(?:\\+(${l[m.BUILDIDENTIFIER]}(?:\\.${l[m.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${l[m.MAINVERSION]}${l[m.PRERELEASE]}?${l[m.BUILD]}?`),w("FULL",`^${l[m.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${l[m.MAINVERSIONLOOSE]}${l[m.PRERELEASELOOSE]}?${l[m.BUILD]}?`),w("LOOSE",`^${l[m.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${l[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${l[m.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${l[m.XRANGEIDENTIFIER]})(?:\\.(${l[m.XRANGEIDENTIFIER]})(?:\\.(${l[m.XRANGEIDENTIFIER]})(?:${l[m.PRERELEASE]})?${l[m.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${l[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[m.XRANGEIDENTIFIERLOOSE]})(?:${l[m.PRERELEASELOOSE]})?${l[m.BUILD]}?)?)?`),w("XRANGE",`^${l[m.GTLT]}\\s*${l[m.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${l[m.GTLT]}\\s*${l[m.XRANGEPLAINLOOSE]}$`),w("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),w("COERCERTL",l[m.COERCE],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${l[m.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",w("TILDE",`^${l[m.LONETILDE]}${l[m.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${l[m.LONETILDE]}${l[m.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${l[m.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",w("CARET",`^${l[m.LONECARET]}${l[m.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${l[m.LONECARET]}${l[m.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${l[m.GTLT]}\\s*(${l[m.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${l[m.GTLT]}\\s*(${l[m.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${l[m.GTLT]}\\s*(${l[m.LOOSEPLAIN]}|${l[m.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${l[m.XRANGEPLAIN]})\\s+-\\s+(${l[m.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${l[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[m.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_r,_r.exports);var Fe=_r.exports;const cs=Object.freeze({loose:!0}),ls=Object.freeze({}),hs=e=>e?typeof e!="object"?cs:e:ls;var Mr=hs;const ft=/^[0-9]+$/,In=(e,r)=>{const t=ft.test(e),s=ft.test(r);return t&&s&&(e=+e,r=+r),e===r?0:t&&!s?-1:s&&!t?1:e<r?-1:1},ps=(e,r)=>In(r,e);var xn={compareIdentifiers:In,rcompareIdentifiers:ps};const Ue=sr,{MAX_LENGTH:ct,MAX_SAFE_INTEGER:Ge}=ir,{safeRe:lt,t:ht}=Fe,ms=Mr,{compareIdentifiers:ye}=xn;let ys=class ee{constructor(r,t){if(t=ms(t),r instanceof ee){if(r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>ct)throw new TypeError(`version is longer than ${ct} characters`);Ue("SemVer",r,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=r.trim().match(t.loose?lt[ht.LOOSE]:lt[ht.FULL]);if(!s)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>Ge||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ge||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ge||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const f=+o;if(f>=0&&f<Ge)return f}return o}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(Ue("SemVer.compare",this.version,this.options,r),!(r instanceof ee)){if(typeof r=="string"&&r===this.version)return 0;r=new ee(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof ee||(r=new ee(r,this.options)),ye(this.major,r.major)||ye(this.minor,r.minor)||ye(this.patch,r.patch)}comparePre(r){if(r instanceof ee||(r=new ee(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],o=r.prerelease[t];if(Ue("prerelease compare",t,s,o),s===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(s===void 0)return-1;if(s===o)continue;return ye(s,o)}while(++t)}compareBuild(r){r instanceof ee||(r=new ee(r,this.options));let t=0;do{const s=this.build[t],o=r.build[t];if(Ue("prerelease compare",t,s,o),s===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(s===void 0)return-1;if(s===o)continue;return ye(s,o)}while(++t)}inc(r,t,s){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(s)?1:0;if(!t&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(t===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(t){let f=[t,o];s===!1&&(f=[t]),ye(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var k=ys;const pt=k,Es=(e,r,t=!1)=>{if(e instanceof pt)return e;try{return new pt(e,r)}catch(s){if(!t)return null;throw s}};var Ie=Es;const ds=Ie,gs=(e,r)=>{const t=ds(e,r);return t?t.version:null};var vs=gs;const ws=Ie,Ss=(e,r)=>{const t=ws(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null};var $s=Ss;const mt=k,As=(e,r,t,s,o)=>{typeof t=="string"&&(o=s,s=t,t=void 0);try{return new mt(e instanceof mt?e.version:e,t).inc(r,s,o).version}catch{return null}};var Is=As;const yt=Ie,xs=(e,r)=>{const t=yt(e,null,!0),s=yt(r,null,!0),o=t.compare(s);if(o===0)return null;const f=o>0,p=f?t:s,c=f?s:t,l=!!p.prerelease.length;if(!!c.prerelease.length&&!l)return!c.patch&&!c.minor?"major":p.patch?"patch":p.minor?"minor":"major";const y=l?"pre":"";return t.major!==s.major?y+"major":t.minor!==s.minor?y+"minor":t.patch!==s.patch?y+"patch":"prerelease"};var bs=xs;const Rs=k,Ts=(e,r)=>new Rs(e,r).major;var Ns=Ts;const Ls=k,Os=(e,r)=>new Ls(e,r).minor;var _s=Os;const Fs=k,Bs=(e,r)=>new Fs(e,r).patch;var js=Bs;const Ps=Ie,Cs=(e,r)=>{const t=Ps(e,r);return t&&t.prerelease.length?t.prerelease:null};var Ds=Cs;const Et=k,Us=(e,r,t)=>new Et(e,t).compare(new Et(r,t));var z=Us;const Gs=z,Ms=(e,r,t)=>Gs(r,e,t);var Vs=Ms;const Hs=z,Xs=(e,r)=>Hs(e,r,!0);var ks=Xs;const dt=k,qs=(e,r,t)=>{const s=new dt(e,t),o=new dt(r,t);return s.compare(o)||s.compareBuild(o)};var Vr=qs;const Ks=Vr,Ws=(e,r)=>e.sort((t,s)=>Ks(t,s,r));var Ys=Ws;const Js=Vr,zs=(e,r)=>e.sort((t,s)=>Js(s,t,r));var Zs=zs;const Qs=z,eo=(e,r,t)=>Qs(e,r,t)>0;var or=eo;const ro=z,to=(e,r,t)=>ro(e,r,t)<0;var Hr=to;const no=z,io=(e,r,t)=>no(e,r,t)===0;var bn=io;const so=z,oo=(e,r,t)=>so(e,r,t)!==0;var Rn=oo;const ao=z,uo=(e,r,t)=>ao(e,r,t)>=0;var Xr=uo;const fo=z,co=(e,r,t)=>fo(e,r,t)<=0;var kr=co;const lo=bn,ho=Rn,po=or,mo=Xr,yo=Hr,Eo=kr,go=(e,r,t,s)=>{switch(r){case"===":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e===t;case"!==":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e!==t;case"":case"=":case"==":return lo(e,t,s);case"!=":return ho(e,t,s);case">":return po(e,t,s);case">=":return mo(e,t,s);case"<":return yo(e,t,s);case"<=":return Eo(e,t,s);default:throw new TypeError(`Invalid operator: ${r}`)}};var Tn=go;const vo=k,wo=Ie,{safeRe:Me,t:Ve}=Fe,So=(e,r)=>{if(e instanceof vo)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;r=r||{};let t=null;if(!r.rtl)t=e.match(Me[Ve.COERCE]);else{let s;for(;(s=Me[Ve.COERCERTL].exec(e))&&(!t||t.index+t[0].length!==e.length);)(!t||s.index+s[0].length!==t.index+t[0].length)&&(t=s),Me[Ve.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;Me[Ve.COERCERTL].lastIndex=-1}return t===null?null:wo(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,r)};var $o=So,$r,gt;function Ao(){return gt||(gt=1,$r=function(e){e.prototype[Symbol.iterator]=function*(){for(let r=this.head;r;r=r.next)yield r.value}}),$r}var Io=_;_.Node=pe;_.create=_;function _(e){var r=this;if(r instanceof _||(r=new _),r.tail=null,r.head=null,r.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){r.push(o)});else if(arguments.length>0)for(var t=0,s=arguments.length;t<s;t++)r.push(arguments[t]);return r}_.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var r=e.next,t=e.prev;return r&&(r.prev=t),t&&(t.next=r),e===this.head&&(this.head=r),e===this.tail&&(this.tail=t),e.list.length--,e.next=null,e.prev=null,e.list=null,r};_.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var r=this.head;e.list=this,e.next=r,r&&(r.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};_.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var r=this.tail;e.list=this,e.prev=r,r&&(r.next=e),this.tail=e,this.head||(this.head=e),this.length++}};_.prototype.push=function(){for(var e=0,r=arguments.length;e<r;e++)bo(this,arguments[e]);return this.length};_.prototype.unshift=function(){for(var e=0,r=arguments.length;e<r;e++)Ro(this,arguments[e]);return this.length};_.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};_.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};_.prototype.forEach=function(e,r){r=r||this;for(var t=this.head,s=0;t!==null;s++)e.call(r,t.value,s,this),t=t.next};_.prototype.forEachReverse=function(e,r){r=r||this;for(var t=this.tail,s=this.length-1;t!==null;s--)e.call(r,t.value,s,this),t=t.prev};_.prototype.get=function(e){for(var r=0,t=this.head;t!==null&&r<e;r++)t=t.next;if(r===e&&t!==null)return t.value};_.prototype.getReverse=function(e){for(var r=0,t=this.tail;t!==null&&r<e;r++)t=t.prev;if(r===e&&t!==null)return t.value};_.prototype.map=function(e,r){r=r||this;for(var t=new _,s=this.head;s!==null;)t.push(e.call(r,s.value,this)),s=s.next;return t};_.prototype.mapReverse=function(e,r){r=r||this;for(var t=new _,s=this.tail;s!==null;)t.push(e.call(r,s.value,this)),s=s.prev;return t};_.prototype.reduce=function(e,r){var t,s=this.head;if(arguments.length>1)t=r;else if(this.head)s=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;s!==null;o++)t=e(t,s.value,o),s=s.next;return t};_.prototype.reduceReverse=function(e,r){var t,s=this.tail;if(arguments.length>1)t=r;else if(this.tail)s=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;s!==null;o--)t=e(t,s.value,o),s=s.prev;return t};_.prototype.toArray=function(){for(var e=new Array(this.length),r=0,t=this.head;t!==null;r++)e[r]=t.value,t=t.next;return e};_.prototype.toArrayReverse=function(){for(var e=new Array(this.length),r=0,t=this.tail;t!==null;r++)e[r]=t.value,t=t.prev;return e};_.prototype.slice=function(e,r){r=r||this.length,r<0&&(r+=this.length),e=e||0,e<0&&(e+=this.length);var t=new _;if(r<e||r<0)return t;e<0&&(e=0),r>this.length&&(r=this.length);for(var s=0,o=this.head;o!==null&&s<e;s++)o=o.next;for(;o!==null&&s<r;s++,o=o.next)t.push(o.value);return t};_.prototype.sliceReverse=function(e,r){r=r||this.length,r<0&&(r+=this.length),e=e||0,e<0&&(e+=this.length);var t=new _;if(r<e||r<0)return t;e<0&&(e=0),r>this.length&&(r=this.length);for(var s=this.length,o=this.tail;o!==null&&s>r;s--)o=o.prev;for(;o!==null&&s>e;s--,o=o.prev)t.push(o.value);return t};_.prototype.splice=function(e,r,...t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var s=0,o=this.head;o!==null&&s<e;s++)o=o.next;for(var f=[],s=0;o&&s<r;s++)f.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var s=0;s<t.length;s++)o=xo(this,o,t[s]);return f};_.prototype.reverse=function(){for(var e=this.head,r=this.tail,t=e;t!==null;t=t.prev){var s=t.prev;t.prev=t.next,t.next=s}return this.head=r,this.tail=e,this};function xo(e,r,t){var s=r===e.head?new pe(t,null,r,e):new pe(t,r,r.next,e);return s.next===null&&(e.tail=s),s.prev===null&&(e.head=s),e.length++,s}function bo(e,r){e.tail=new pe(r,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Ro(e,r){e.head=new pe(r,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function pe(e,r,t,s){if(!(this instanceof pe))return new pe(e,r,t,s);this.list=s,this.value=e,r?(r.next=this,this.prev=r):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Ao()(_)}catch{}const To=Io,ce=Symbol("max"),ae=Symbol("length"),Ee=Symbol("lengthCalculator"),Te=Symbol("allowStale"),le=Symbol("maxAge"),oe=Symbol("dispose"),vt=Symbol("noDisposeOnSet"),M=Symbol("lruList"),Y=Symbol("cache"),Nn=Symbol("updateAgeOnGet"),Ar=()=>1;class No{constructor(r){if(typeof r=="number"&&(r={max:r}),r||(r={}),r.max&&(typeof r.max!="number"||r.max<0))throw new TypeError("max must be a non-negative number");this[ce]=r.max||1/0;const t=r.length||Ar;if(this[Ee]=typeof t!="function"?Ar:t,this[Te]=r.stale||!1,r.maxAge&&typeof r.maxAge!="number")throw new TypeError("maxAge must be a number");this[le]=r.maxAge||0,this[oe]=r.dispose,this[vt]=r.noDisposeOnSet||!1,this[Nn]=r.updateAgeOnGet||!1,this.reset()}set max(r){if(typeof r!="number"||r<0)throw new TypeError("max must be a non-negative number");this[ce]=r||1/0,xe(this)}get max(){return this[ce]}set allowStale(r){this[Te]=!!r}get allowStale(){return this[Te]}set maxAge(r){if(typeof r!="number")throw new TypeError("maxAge must be a non-negative number");this[le]=r,xe(this)}get maxAge(){return this[le]}set lengthCalculator(r){typeof r!="function"&&(r=Ar),r!==this[Ee]&&(this[Ee]=r,this[ae]=0,this[M].forEach(t=>{t.length=this[Ee](t.value,t.key),this[ae]+=t.length})),xe(this)}get lengthCalculator(){return this[Ee]}get length(){return this[ae]}get itemCount(){return this[M].length}rforEach(r,t){t=t||this;for(let s=this[M].tail;s!==null;){const o=s.prev;wt(this,r,s,t),s=o}}forEach(r,t){t=t||this;for(let s=this[M].head;s!==null;){const o=s.next;wt(this,r,s,t),s=o}}keys(){return this[M].toArray().map(r=>r.key)}values(){return this[M].toArray().map(r=>r.value)}reset(){this[oe]&&this[M]&&this[M].length&&this[M].forEach(r=>this[oe](r.key,r.value)),this[Y]=new Map,this[M]=new To,this[ae]=0}dump(){return this[M].map(r=>Ze(this,r)?!1:{k:r.key,v:r.value,e:r.now+(r.maxAge||0)}).toArray().filter(r=>r)}dumpLru(){return this[M]}set(r,t,s){if(s=s||this[le],s&&typeof s!="number")throw new TypeError("maxAge must be a number");const o=s?Date.now():0,f=this[Ee](t,r);if(this[Y].has(r)){if(f>this[ce])return ge(this,this[Y].get(r)),!1;const l=this[Y].get(r).value;return this[oe]&&(this[vt]||this[oe](r,l.value)),l.now=o,l.maxAge=s,l.value=t,this[ae]+=f-l.length,l.length=f,this.get(r),xe(this),!0}const p=new Lo(r,t,f,o,s);return p.length>this[ce]?(this[oe]&&this[oe](r,t),!1):(this[ae]+=p.length,this[M].unshift(p),this[Y].set(r,this[M].head),xe(this),!0)}has(r){if(!this[Y].has(r))return!1;const t=this[Y].get(r).value;return!Ze(this,t)}get(r){return Ir(this,r,!0)}peek(r){return Ir(this,r,!1)}pop(){const r=this[M].tail;return r?(ge(this,r),r.value):null}del(r){ge(this,this[Y].get(r))}load(r){this.reset();const t=Date.now();for(let s=r.length-1;s>=0;s--){const o=r[s],f=o.e||0;if(f===0)this.set(o.k,o.v);else{const p=f-t;p>0&&this.set(o.k,o.v,p)}}}prune(){this[Y].forEach((r,t)=>Ir(this,t,!1))}}const Ir=(e,r,t)=>{const s=e[Y].get(r);if(s){const o=s.value;if(Ze(e,o)){if(ge(e,s),!e[Te])return}else t&&(e[Nn]&&(s.value.now=Date.now()),e[M].unshiftNode(s));return o.value}},Ze=(e,r)=>{if(!r||!r.maxAge&&!e[le])return!1;const t=Date.now()-r.now;return r.maxAge?t>r.maxAge:e[le]&&t>e[le]},xe=e=>{if(e[ae]>e[ce])for(let r=e[M].tail;e[ae]>e[ce]&&r!==null;){const t=r.prev;ge(e,r),r=t}},ge=(e,r)=>{if(r){const t=r.value;e[oe]&&e[oe](t.key,t.value),e[ae]-=t.length,e[Y].delete(t.key),e[M].removeNode(r)}};class Lo{constructor(r,t,s,o,f){this.key=r,this.value=t,this.length=s,this.now=o,this.maxAge=f||0}}const wt=(e,r,t,s)=>{let o=t.value;Ze(e,o)&&(ge(e,t),e[Te]||(o=void 0)),o&&r.call(s,o.value,o.key,e)};var Oo=No,xr,St;function Z(){if(St)return xr;St=1;class e{constructor(S,R){if(R=s(R),S instanceof e)return S.loose===!!R.loose&&S.includePrerelease===!!R.includePrerelease?S:new e(S.raw,R);if(S instanceof o)return this.raw=S.value,this.set=[[S]],this.format(),this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=S.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(x=>this.parseRange(x.trim())).filter(x=>x.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const x=this.set[0];if(this.set=this.set.filter(b=>!w(b[0])),this.set.length===0)this.set=[x];else if(this.set.length>1){for(const b of this.set)if(b.length===1&&B(b[0])){this.set=[b];break}}}this.format()}format(){return this.range=this.set.map(S=>S.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(S){const x=((this.options.includePrerelease&&T)|(this.options.loose&&v))+":"+S,b=t.get(x);if(b)return b;const A=this.options.loose,N=A?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];S=S.replace(N,yr(this.options.includePrerelease)),f("hyphen replace",S),S=S.replace(c[l.COMPARATORTRIM],m),f("comparator trim",S),S=S.replace(c[l.TILDETRIM],y),f("tilde trim",S),S=S.replace(c[l.CARETTRIM],E),f("caret trim",S);let F=S.split(" ").map(D=>K(D,this.options)).join(" ").split(/\s+/).map(D=>mr(D,this.options));A&&(F=F.filter(D=>(f("loose invalid filter",D,this.options),!!D.match(c[l.COMPARATORLOOSE])))),f("range list",F);const I=new Map,L=F.map(D=>new o(D,this.options));for(const D of L){if(w(D))return[D];I.set(D.value,D)}I.size>1&&I.has("")&&I.delete("");const H=[...I.values()];return t.set(x,H),H}intersects(S,R){if(!(S instanceof e))throw new TypeError("a Range is required");return this.set.some(x=>V(x,R)&&S.set.some(b=>V(b,R)&&x.every(A=>b.every(N=>A.intersects(N,R)))))}test(S){if(!S)return!1;if(typeof S=="string")try{S=new p(S,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(Er(this.set[R],S,this.options))return!0;return!1}}xr=e;const r=Oo,t=new r({max:1e3}),s=Mr,o=ar(),f=sr,p=k,{safeRe:c,t:l,comparatorTrimReplace:m,tildeTrimReplace:y,caretTrimReplace:E}=Fe,{FLAG_INCLUDE_PRERELEASE:T,FLAG_LOOSE:v}=ir,w=$=>$.value==="<0.0.0-0",B=$=>$.value==="",V=($,S)=>{let R=!0;const x=$.slice();let b=x.pop();for(;R&&x.length;)R=x.every(A=>b.intersects(A,S)),b=x.pop();return R},K=($,S)=>(f("comp",$,S),$=se($,S),f("caret",$),$=q($,S),f("tildes",$),$=je($,S),f("xrange",$),$=pr($,S),f("stars",$),$),U=$=>!$||$.toLowerCase()==="x"||$==="*",q=($,S)=>$.trim().split(/\s+/).map(R=>lr(R,S)).join(" "),lr=($,S)=>{const R=S.loose?c[l.TILDELOOSE]:c[l.TILDE];return $.replace(R,(x,b,A,N,F)=>{f("tilde",$,x,b,A,N,F);let I;return U(b)?I="":U(A)?I=`>=${b}.0.0 <${+b+1}.0.0-0`:U(N)?I=`>=${b}.${A}.0 <${b}.${+A+1}.0-0`:F?(f("replaceTilde pr",F),I=`>=${b}.${A}.${N}-${F} <${b}.${+A+1}.0-0`):I=`>=${b}.${A}.${N} <${b}.${+A+1}.0-0`,f("tilde return",I),I})},se=($,S)=>$.trim().split(/\s+/).map(R=>Be(R,S)).join(" "),Be=($,S)=>{f("caret",$,S);const R=S.loose?c[l.CARETLOOSE]:c[l.CARET],x=S.includePrerelease?"-0":"";return $.replace(R,(b,A,N,F,I)=>{f("caret",$,b,A,N,F,I);let L;return U(A)?L="":U(N)?L=`>=${A}.0.0${x} <${+A+1}.0.0-0`:U(F)?A==="0"?L=`>=${A}.${N}.0${x} <${A}.${+N+1}.0-0`:L=`>=${A}.${N}.0${x} <${+A+1}.0.0-0`:I?(f("replaceCaret pr",I),A==="0"?N==="0"?L=`>=${A}.${N}.${F}-${I} <${A}.${N}.${+F+1}-0`:L=`>=${A}.${N}.${F}-${I} <${A}.${+N+1}.0-0`:L=`>=${A}.${N}.${F}-${I} <${+A+1}.0.0-0`):(f("no pr"),A==="0"?N==="0"?L=`>=${A}.${N}.${F}${x} <${A}.${N}.${+F+1}-0`:L=`>=${A}.${N}.${F}${x} <${A}.${+N+1}.0-0`:L=`>=${A}.${N}.${F} <${+A+1}.0.0-0`),f("caret return",L),L})},je=($,S)=>(f("replaceXRanges",$,S),$.split(/\s+/).map(R=>hr(R,S)).join(" ")),hr=($,S)=>{$=$.trim();const R=S.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return $.replace(R,(x,b,A,N,F,I)=>{f("xRange",$,x,b,A,N,F,I);const L=U(A),H=L||U(N),D=H||U(F),ue=D;return b==="="&&ue&&(b=""),I=S.includePrerelease?"-0":"",L?b===">"||b==="<"?x="<0.0.0-0":x="*":b&&ue?(H&&(N=0),F=0,b===">"?(b=">=",H?(A=+A+1,N=0,F=0):(N=+N+1,F=0)):b==="<="&&(b="<",H?A=+A+1:N=+N+1),b==="<"&&(I="-0"),x=`${b+A}.${N}.${F}${I}`):H?x=`>=${A}.0.0${I} <${+A+1}.0.0-0`:D&&(x=`>=${A}.${N}.0${I} <${A}.${+N+1}.0-0`),f("xRange return",x),x})},pr=($,S)=>(f("replaceStars",$,S),$.trim().replace(c[l.STAR],"")),mr=($,S)=>(f("replaceGTE0",$,S),$.trim().replace(c[S.includePrerelease?l.GTE0PRE:l.GTE0],"")),yr=$=>(S,R,x,b,A,N,F,I,L,H,D,ue,Qr)=>(U(x)?R="":U(b)?R=`>=${x}.0.0${$?"-0":""}`:U(A)?R=`>=${x}.${b}.0${$?"-0":""}`:N?R=`>=${R}`:R=`>=${R}${$?"-0":""}`,U(L)?I="":U(H)?I=`<${+L+1}.0.0-0`:U(D)?I=`<${L}.${+H+1}.0-0`:ue?I=`<=${L}.${H}.${D}-${ue}`:$?I=`<${L}.${H}.${+D+1}-0`:I=`<=${I}`,`${R} ${I}`.trim()),Er=($,S,R)=>{for(let x=0;x<$.length;x++)if(!$[x].test(S))return!1;if(S.prerelease.length&&!R.includePrerelease){for(let x=0;x<$.length;x++)if(f($[x].semver),$[x].semver!==o.ANY&&$[x].semver.prerelease.length>0){const b=$[x].semver;if(b.major===S.major&&b.minor===S.minor&&b.patch===S.patch)return!0}return!1}return!0};return xr}var br,$t;function ar(){if($t)return br;$t=1;const e=Symbol("SemVer ANY");class r{static get ANY(){return e}constructor(y,E){if(E=t(E),y instanceof r){if(y.loose===!!E.loose)return y;y=y.value}y=y.trim().split(/\s+/).join(" "),p("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===e?this.value="":this.value=this.operator+this.semver.version,p("comp",this)}parse(y){const E=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],T=y.match(E);if(!T)throw new TypeError(`Invalid comparator: ${y}`);this.operator=T[1]!==void 0?T[1]:"",this.operator==="="&&(this.operator=""),T[2]?this.semver=new c(T[2],this.options.loose):this.semver=e}toString(){return this.value}test(y){if(p("Comparator.test",y,this.options.loose),this.semver===e||y===e)return!0;if(typeof y=="string")try{y=new c(y,this.options)}catch{return!1}return f(y,this.operator,this.semver,this.options)}intersects(y,E){if(!(y instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(y.value,E).test(this.value):y.operator===""?y.value===""?!0:new l(this.value,E).test(y.semver):(E=t(E),E.includePrerelease&&(this.value==="<0.0.0-0"||y.value==="<0.0.0-0")||!E.includePrerelease&&(this.value.startsWith("<0.0.0")||y.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&y.operator.startsWith(">")||this.operator.startsWith("<")&&y.operator.startsWith("<")||this.semver.version===y.semver.version&&this.operator.includes("=")&&y.operator.includes("=")||f(this.semver,"<",y.semver,E)&&this.operator.startsWith(">")&&y.operator.startsWith("<")||f(this.semver,">",y.semver,E)&&this.operator.startsWith("<")&&y.operator.startsWith(">")))}}br=r;const t=Mr,{safeRe:s,t:o}=Fe,f=Tn,p=sr,c=k,l=Z();return br}const _o=Z(),Fo=(e,r,t)=>{try{r=new _o(r,t)}catch{return!1}return r.test(e)};var ur=Fo;const Bo=Z(),jo=(e,r)=>new Bo(e,r).set.map(t=>t.map(s=>s.value).join(" ").trim().split(" "));var Po=jo;const Co=k,Do=Z(),Uo=(e,r,t)=>{let s=null,o=null,f=null;try{f=new Do(r,t)}catch{return null}return e.forEach(p=>{f.test(p)&&(!s||o.compare(p)===-1)&&(s=p,o=new Co(s,t))}),s};var Go=Uo;const Mo=k,Vo=Z(),Ho=(e,r,t)=>{let s=null,o=null,f=null;try{f=new Vo(r,t)}catch{return null}return e.forEach(p=>{f.test(p)&&(!s||o.compare(p)===1)&&(s=p,o=new Mo(s,t))}),s};var Xo=Ho;const Rr=k,ko=Z(),At=or,qo=(e,r)=>{e=new ko(e,r);let t=new Rr("0.0.0");if(e.test(t)||(t=new Rr("0.0.0-0"),e.test(t)))return t;t=null;for(let s=0;s<e.set.length;++s){const o=e.set[s];let f=null;o.forEach(p=>{const c=new Rr(p.semver.version);switch(p.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!f||At(c,f))&&(f=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${p.operator}`)}}),f&&(!t||At(t,f))&&(t=f)}return t&&e.test(t)?t:null};var Ko=qo;const Wo=Z(),Yo=(e,r)=>{try{return new Wo(e,r).range||"*"}catch{return null}};var Jo=Yo;const zo=k,Ln=ar(),{ANY:Zo}=Ln,Qo=Z(),ea=ur,It=or,xt=Hr,ra=kr,ta=Xr,na=(e,r,t,s)=>{e=new zo(e,s),r=new Qo(r,s);let o,f,p,c,l;switch(t){case">":o=It,f=ra,p=xt,c=">",l=">=";break;case"<":o=xt,f=ta,p=It,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ea(e,r,s))return!1;for(let m=0;m<r.set.length;++m){const y=r.set[m];let E=null,T=null;if(y.forEach(v=>{v.semver===Zo&&(v=new Ln(">=0.0.0")),E=E||v,T=T||v,o(v.semver,E.semver,s)?E=v:p(v.semver,T.semver,s)&&(T=v)}),E.operator===c||E.operator===l||(!T.operator||T.operator===c)&&f(e,T.semver))return!1;if(T.operator===l&&p(e,T.semver))return!1}return!0};var qr=na;const ia=qr,sa=(e,r,t)=>ia(e,r,">",t);var oa=sa;const aa=qr,ua=(e,r,t)=>aa(e,r,"<",t);var fa=ua;const bt=Z(),ca=(e,r,t)=>(e=new bt(e,t),r=new bt(r,t),e.intersects(r,t));var la=ca;const ha=ur,pa=z;var ma=(e,r,t)=>{const s=[];let o=null,f=null;const p=e.sort((y,E)=>pa(y,E,t));for(const y of p)ha(y,r,t)?(f=y,o||(o=y)):(f&&s.push([o,f]),f=null,o=null);o&&s.push([o,null]);const c=[];for(const[y,E]of s)y===E?c.push(y):!E&&y===p[0]?c.push("*"):E?y===p[0]?c.push(`<=${E}`):c.push(`${y} - ${E}`):c.push(`>=${y}`);const l=c.join(" || "),m=typeof r.raw=="string"?r.raw:String(r);return l.length<m.length?l:r};const Rt=Z(),Kr=ar(),{ANY:Tr}=Kr,be=ur,Wr=z,ya=(e,r,t={})=>{if(e===r)return!0;e=new Rt(e,t),r=new Rt(r,t);let s=!1;e:for(const o of e.set){for(const f of r.set){const p=da(o,f,t);if(s=s||p!==null,p)continue e}if(s)return!1}return!0},Ea=[new Kr(">=0.0.0-0")],Tt=[new Kr(">=0.0.0")],da=(e,r,t)=>{if(e===r)return!0;if(e.length===1&&e[0].semver===Tr){if(r.length===1&&r[0].semver===Tr)return!0;t.includePrerelease?e=Ea:e=Tt}if(r.length===1&&r[0].semver===Tr){if(t.includePrerelease)return!0;r=Tt}const s=new Set;let o,f;for(const v of e)v.operator===">"||v.operator===">="?o=Nt(o,v,t):v.operator==="<"||v.operator==="<="?f=Lt(f,v,t):s.add(v.semver);if(s.size>1)return null;let p;if(o&&f){if(p=Wr(o.semver,f.semver,t),p>0)return null;if(p===0&&(o.operator!==">="||f.operator!=="<="))return null}for(const v of s){if(o&&!be(v,String(o),t)||f&&!be(v,String(f),t))return null;for(const w of r)if(!be(v,String(w),t))return!1;return!0}let c,l,m,y,E=f&&!t.includePrerelease&&f.semver.prerelease.length?f.semver:!1,T=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1;E&&E.prerelease.length===1&&f.operator==="<"&&E.prerelease[0]===0&&(E=!1);for(const v of r){if(y=y||v.operator===">"||v.operator===">=",m=m||v.operator==="<"||v.operator==="<=",o){if(T&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===T.major&&v.semver.minor===T.minor&&v.semver.patch===T.patch&&(T=!1),v.operator===">"||v.operator===">="){if(c=Nt(o,v,t),c===v&&c!==o)return!1}else if(o.operator===">="&&!be(o.semver,String(v),t))return!1}if(f){if(E&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===E.major&&v.semver.minor===E.minor&&v.semver.patch===E.patch&&(E=!1),v.operator==="<"||v.operator==="<="){if(l=Lt(f,v,t),l===v&&l!==f)return!1}else if(f.operator==="<="&&!be(f.semver,String(v),t))return!1}if(!v.operator&&(f||o)&&p!==0)return!1}return!(o&&m&&!f&&p!==0||f&&y&&!o&&p!==0||T||E)},Nt=(e,r,t)=>{if(!e)return r;const s=Wr(e.semver,r.semver,t);return s>0?e:s<0||r.operator===">"&&e.operator===">="?r:e},Lt=(e,r,t)=>{if(!e)return r;const s=Wr(e.semver,r.semver,t);return s<0?e:s>0||r.operator==="<"&&e.operator==="<="?r:e};var ga=ya;const Nr=Fe,Ot=ir,va=k,_t=xn,wa=Ie,Sa=vs,$a=$s,Aa=Is,Ia=bs,xa=Ns,ba=_s,Ra=js,Ta=Ds,Na=z,La=Vs,Oa=ks,_a=Vr,Fa=Ys,Ba=Zs,ja=or,Pa=Hr,Ca=bn,Da=Rn,Ua=Xr,Ga=kr,Ma=Tn,Va=$o,Ha=ar(),Xa=Z(),ka=ur,qa=Po,Ka=Go,Wa=Xo,Ya=Ko,Ja=Jo,za=qr,Za=oa,Qa=fa,eu=la,ru=ma,tu=ga;var Yr={parse:wa,valid:Sa,clean:$a,inc:Aa,diff:Ia,major:xa,minor:ba,patch:Ra,prerelease:Ta,compare:Na,rcompare:La,compareLoose:Oa,compareBuild:_a,sort:Fa,rsort:Ba,gt:ja,lt:Pa,eq:Ca,neq:Da,gte:Ua,lte:Ga,cmp:Ma,coerce:Va,Comparator:Ha,Range:Xa,satisfies:ka,toComparators:qa,maxSatisfying:Ka,minSatisfying:Wa,minVersion:Ya,validRange:Ja,outside:za,gtr:Za,ltr:Qa,intersects:eu,simplifyRange:ru,subset:tu,SemVer:va,re:Nr.re,src:Nr.src,tokens:Nr.t,SEMVER_SPEC_VERSION:Ot.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ot.RELEASE_TYPES,compareIdentifiers:_t.compareIdentifiers,rcompareIdentifiers:_t.rcompareIdentifiers};const nu=Yr;var iu=nu.satisfies(process.version,">=15.7.0");const su=Yr;var ou=su.satisfies(process.version,">=16.9.0");const au=iu,uu=ou,fu={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},cu={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};var On=function(e,r){if(!e||!r)return;const t=r.asymmetricKeyType;if(!t)return;const s=fu[t];if(!s)throw new Error(`Unknown key type "${t}".`);if(!s.includes(e))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${s.join(", ")}.`);if(au)switch(t){case"ec":const o=r.asymmetricKeyDetails.namedCurve,f=cu[e];if(o!==f)throw new Error(`"alg" parameter "${e}" requires curve "${f}".`);break;case"rsa-pss":if(uu){const p=parseInt(e.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:m}=r.asymmetricKeyDetails;if(c!==`sha${p}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(m!==void 0&&m>p>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}},lu=Yr,_n=lu.satisfies(process.version,"^6.12.0 || >=8.0.0");const P=nr,hu=vn,Ft=Sn,pu=dn,mu=$n,yu=On,Eu=_n,du=ne,{KeyObject:gu,createSecretKey:vu,createPublicKey:wu}=ie,Fr=["RS256","RS384","RS512"],Su=["ES256","ES384","ES512"],Br=["RS256","RS384","RS512"],$u=["HS256","HS384","HS512"];Eu&&(Fr.splice(Fr.length,0,"PS256","PS384","PS512"),Br.splice(Br.length,0,"PS256","PS384","PS512"));var Au=function(e,r,t,s){typeof t=="function"&&!s&&(s=t,t={}),t||(t={}),t=Object.assign({},t);let o;if(s?o=s:o=function(y,E){if(y)throw y;return E},t.clockTimestamp&&typeof t.clockTimestamp!="number")return o(new P("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return o(new P("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return o(new P("allowInvalidAsymmetricKeyTypes must be a boolean"));const f=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return o(new P("jwt must be provided"));if(typeof e!="string")return o(new P("jwt must be a string"));const p=e.split(".");if(p.length!==3)return o(new P("jwt malformed"));let c;try{c=pu(e,{complete:!0})}catch(y){return o(y)}if(!c)return o(new P("invalid token"));const l=c.header;let m;if(typeof r=="function"){if(!s)return o(new P("verify must be called asynchronous if secret or public key is provided as a callback"));m=r}else m=function(y,E){return E(null,r)};return m(l,function(y,E){if(y)return o(new P("error in secret or public key callback: "+y.message));const T=p[2].trim()!=="";if(!T&&E)return o(new P("jwt signature is required"));if(T&&!E)return o(new P("secret or public key must be provided"));if(!T&&!t.algorithms)return o(new P('please specify "none" in "algorithms" to verify unsigned tokens'));if(E!=null&&!(E instanceof gu))try{E=wu(E)}catch{try{E=vu(typeof E=="string"?Buffer.from(E):E)}catch{return o(new P("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(E.type==="secret"?t.algorithms=$u:["rsa","rsa-pss"].includes(E.asymmetricKeyType)?t.algorithms=Br:E.asymmetricKeyType==="ec"?t.algorithms=Su:t.algorithms=Fr),t.algorithms.indexOf(c.header.alg)===-1)return o(new P("invalid algorithm"));if(l.alg.startsWith("HS")&&E.type!=="secret")return o(new P(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&E.type!=="public")return o(new P(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{yu(l.alg,E)}catch(B){return o(B)}let v;try{v=du.verify(e,c.header.alg,E)}catch(B){return o(B)}if(!v)return o(new P("invalid signature"));const w=c.payload;if(typeof w.nbf<"u"&&!t.ignoreNotBefore){if(typeof w.nbf!="number")return o(new P("invalid nbf value"));if(w.nbf>f+(t.clockTolerance||0))return o(new hu("jwt not active",new Date(w.nbf*1e3)))}if(typeof w.exp<"u"&&!t.ignoreExpiration){if(typeof w.exp!="number")return o(new P("invalid exp value"));if(f>=w.exp+(t.clockTolerance||0))return o(new Ft("jwt expired",new Date(w.exp*1e3)))}if(t.audience){const B=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(w.aud)?w.aud:[w.aud]).some(function(U){return B.some(function(q){return q instanceof RegExp?q.test(U):q===U})}))return o(new P("jwt audience invalid. expected: "+B.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&w.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(w.iss)===-1))return o(new P("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&w.sub!==t.subject)return o(new P("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&w.jti!==t.jwtid)return o(new P("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&w.nonce!==t.nonce)return o(new P("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof w.iat!="number")return o(new P("iat required when maxAge is specified"));const B=mu(t.maxAge,w.iat);if(typeof B>"u")return o(new P('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(f>=B+(t.clockTolerance||0))return o(new Ft("maxAge exceeded",new Date(B*1e3)))}if(t.complete===!0){const B=c.signature;return o(null,{header:l,payload:w,signature:B})}return o(null,w)})},Bt=1/0,Fn=9007199254740991,Iu=17976931348623157e292,jt=0/0,xu="[object Arguments]",bu="[object Function]",Ru="[object GeneratorFunction]",Tu="[object String]",Nu="[object Symbol]",Lu=/^\s+|\s+$/g,Ou=/^[-+]0x[0-9a-f]+$/i,_u=/^0b[01]+$/i,Fu=/^0o[0-7]+$/i,Bu=/^(?:0|[1-9]\d*)$/,ju=parseInt;function Pu(e,r){for(var t=-1,s=e?e.length:0,o=Array(s);++t<s;)o[t]=r(e[t],t,e);return o}function Cu(e,r,t,s){for(var o=e.length,f=t+(s?1:-1);s?f--:++f<o;)if(r(e[f],f,e))return f;return-1}function Du(e,r,t){if(r!==r)return Cu(e,Uu,t);for(var s=t-1,o=e.length;++s<o;)if(e[s]===r)return s;return-1}function Uu(e){return e!==e}function Gu(e,r){for(var t=-1,s=Array(e);++t<e;)s[t]=r(t);return s}function Mu(e,r){return Pu(r,function(t){return e[t]})}function Vu(e,r){return function(t){return e(r(t))}}var fr=Object.prototype,Jr=fr.hasOwnProperty,cr=fr.toString,Hu=fr.propertyIsEnumerable,Xu=Vu(Object.keys,Object),ku=Math.max;function qu(e,r){var t=Bn(e)||zu(e)?Gu(e.length,String):[],s=t.length,o=!!s;for(var f in e)(r||Jr.call(e,f))&&!(o&&(f=="length"||Wu(f,s)))&&t.push(f);return t}function Ku(e){if(!Yu(e))return Xu(e);var r=[];for(var t in Object(e))Jr.call(e,t)&&t!="constructor"&&r.push(t);return r}function Wu(e,r){return r=r??Fn,!!r&&(typeof e=="number"||Bu.test(e))&&e>-1&&e%1==0&&e<r}function Yu(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||fr;return e===t}function Ju(e,r,t,s){e=zr(e)?e:uf(e),t=t&&!s?sf(t):0;var o=e.length;return t<0&&(t=ku(o+t,0)),rf(e)?t<=o&&e.indexOf(r,t)>-1:!!o&&Du(e,r,t)>-1}function zu(e){return Zu(e)&&Jr.call(e,"callee")&&(!Hu.call(e,"callee")||cr.call(e)==xu)}var Bn=Array.isArray;function zr(e){return e!=null&&ef(e.length)&&!Qu(e)}function Zu(e){return Zr(e)&&zr(e)}function Qu(e){var r=jr(e)?cr.call(e):"";return r==bu||r==Ru}function ef(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Fn}function jr(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function Zr(e){return!!e&&typeof e=="object"}function rf(e){return typeof e=="string"||!Bn(e)&&Zr(e)&&cr.call(e)==Tu}function tf(e){return typeof e=="symbol"||Zr(e)&&cr.call(e)==Nu}function nf(e){if(!e)return e===0?e:0;if(e=of(e),e===Bt||e===-Bt){var r=e<0?-1:1;return r*Iu}return e===e?e:0}function sf(e){var r=nf(e),t=r%1;return r===r?t?r-t:r:0}function of(e){if(typeof e=="number")return e;if(tf(e))return jt;if(jr(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=jr(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Lu,"");var t=_u.test(e);return t||Fu.test(e)?ju(e.slice(2),t?2:8):Ou.test(e)?jt:+e}function af(e){return zr(e)?qu(e):Ku(e)}function uf(e){return e?Mu(e,af(e)):[]}var ff=Ju,cf="[object Boolean]",lf=Object.prototype,hf=lf.toString;function pf(e){return e===!0||e===!1||mf(e)&&hf.call(e)==cf}function mf(e){return!!e&&typeof e=="object"}var yf=pf,Pt=1/0,Ef=17976931348623157e292,Ct=0/0,df="[object Symbol]",gf=/^\s+|\s+$/g,vf=/^[-+]0x[0-9a-f]+$/i,wf=/^0b[01]+$/i,Sf=/^0o[0-7]+$/i,$f=parseInt,Af=Object.prototype,If=Af.toString;function xf(e){return typeof e=="number"&&e==Nf(e)}function Dt(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function bf(e){return!!e&&typeof e=="object"}function Rf(e){return typeof e=="symbol"||bf(e)&&If.call(e)==df}function Tf(e){if(!e)return e===0?e:0;if(e=Lf(e),e===Pt||e===-Pt){var r=e<0?-1:1;return r*Ef}return e===e?e:0}function Nf(e){var r=Tf(e),t=r%1;return r===r?t?r-t:r:0}function Lf(e){if(typeof e=="number")return e;if(Rf(e))return Ct;if(Dt(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Dt(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(gf,"");var t=wf.test(e);return t||Sf.test(e)?$f(e.slice(2),t?2:8):vf.test(e)?Ct:+e}var Of=xf,_f="[object Number]",Ff=Object.prototype,Bf=Ff.toString;function jf(e){return!!e&&typeof e=="object"}function Pf(e){return typeof e=="number"||jf(e)&&Bf.call(e)==_f}var Cf=Pf,Df="[object Object]";function Uf(e){var r=!1;if(e!=null&&typeof e.toString!="function")try{r=!!(e+"")}catch{}return r}function Gf(e,r){return function(t){return e(r(t))}}var Mf=Function.prototype,jn=Object.prototype,Pn=Mf.toString,Vf=jn.hasOwnProperty,Hf=Pn.call(Object),Xf=jn.toString,kf=Gf(Object.getPrototypeOf,Object);function qf(e){return!!e&&typeof e=="object"}function Kf(e){if(!qf(e)||Xf.call(e)!=Df||Uf(e))return!1;var r=kf(e);if(r===null)return!0;var t=Vf.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&Pn.call(t)==Hf}var Wf=Kf,Yf="[object String]",Jf=Object.prototype,zf=Jf.toString,Zf=Array.isArray;function Qf(e){return!!e&&typeof e=="object"}function ec(e){return typeof e=="string"||!Zf(e)&&Qf(e)&&zf.call(e)==Yf}var rc=ec,tc="Expected a function",Ut=1/0,nc=17976931348623157e292,Gt=0/0,ic="[object Symbol]",sc=/^\s+|\s+$/g,oc=/^[-+]0x[0-9a-f]+$/i,ac=/^0b[01]+$/i,uc=/^0o[0-7]+$/i,fc=parseInt,cc=Object.prototype,lc=cc.toString;function hc(e,r){var t;if(typeof r!="function")throw new TypeError(tc);return e=dc(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}function pc(e){return hc(2,e)}function Mt(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function mc(e){return!!e&&typeof e=="object"}function yc(e){return typeof e=="symbol"||mc(e)&&lc.call(e)==ic}function Ec(e){if(!e)return e===0?e:0;if(e=gc(e),e===Ut||e===-Ut){var r=e<0?-1:1;return r*nc}return e===e?e:0}function dc(e){var r=Ec(e),t=r%1;return r===r?t?r-t:r:0}function gc(e){if(typeof e=="number")return e;if(yc(e))return Gt;if(Mt(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Mt(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(sc,"");var t=ac.test(e);return t||uc.test(e)?fc(e.slice(2),t?2:8):oc.test(e)?Gt:+e}var vc=pc;const Vt=$n,wc=_n,Sc=On,Ht=ne,$c=ff,He=yf,Xt=Of,Lr=Cf,Cn=Wf,fe=rc,Ac=vc,{KeyObject:Ic,createSecretKey:xc,createPrivateKey:bc}=ie,Dn=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];wc&&Dn.splice(3,0,"PS256","PS384","PS512");const Rc={expiresIn:{isValid:function(e){return Xt(e)||fe(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return Xt(e)||fe(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return fe(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:$c.bind(null,Dn),message:'"algorithm" must be a valid string enum value'},header:{isValid:Cn,message:'"header" must be an object'},encoding:{isValid:fe,message:'"encoding" must be a string'},issuer:{isValid:fe,message:'"issuer" must be a string'},subject:{isValid:fe,message:'"subject" must be a string'},jwtid:{isValid:fe,message:'"jwtid" must be a string'},noTimestamp:{isValid:He,message:'"noTimestamp" must be a boolean'},keyid:{isValid:fe,message:'"keyid" must be a string'},mutatePayload:{isValid:He,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:He,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:He,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},Tc={iat:{isValid:Lr,message:'"iat" should be a number of seconds'},exp:{isValid:Lr,message:'"exp" should be a number of seconds'},nbf:{isValid:Lr,message:'"nbf" should be a number of seconds'}};function Un(e,r,t,s){if(!Cn(t))throw new Error('Expected "'+s+'" to be a plain object.');Object.keys(t).forEach(function(o){const f=e[o];if(!f){if(!r)throw new Error('"'+o+'" is not allowed in "'+s+'"');return}if(!f.isValid(t[o]))throw new Error(f.message)})}function Nc(e){return Un(Rc,!1,e,"options")}function Lc(e){return Un(Tc,!0,e,"payload")}const kt={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},Oc=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];var _c=function(e,r,t,s){typeof t=="function"?(s=t,t={}):t=t||{};const o=typeof e=="object"&&!Buffer.isBuffer(e),f=Object.assign({alg:t.algorithm||"HS256",typ:o?"JWT":void 0,kid:t.keyid},t.header);function p(m){if(s)return s(m);throw m}if(!r&&t.algorithm!=="none")return p(new Error("secretOrPrivateKey must have a value"));if(r!=null&&!(r instanceof Ic))try{r=bc(r)}catch{try{r=xc(typeof r=="string"?Buffer.from(r):r)}catch{return p(new Error("secretOrPrivateKey is not valid key material"))}}if(f.alg.startsWith("HS")&&r.type!=="secret")return p(new Error(`secretOrPrivateKey must be a symmetric key when using ${f.alg}`));if(/^(?:RS|PS|ES)/.test(f.alg)){if(r.type!=="private")return p(new Error(`secretOrPrivateKey must be an asymmetric key when using ${f.alg}`));if(!t.allowInsecureKeySizes&&!f.alg.startsWith("ES")&&r.asymmetricKeyDetails!==void 0&&r.asymmetricKeyDetails.modulusLength<2048)return p(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${f.alg}`))}if(typeof e>"u")return p(new Error("payload is required"));if(o){try{Lc(e)}catch(m){return p(m)}t.mutatePayload||(e=Object.assign({},e))}else{const m=Oc.filter(function(y){return typeof t[y]<"u"});if(m.length>0)return p(new Error("invalid "+m.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof t.expiresIn<"u")return p(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof t.notBefore<"u")return p(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{Nc(t)}catch(m){return p(m)}if(!t.allowInvalidAsymmetricKeyTypes)try{Sc(f.alg,r)}catch(m){return p(m)}const c=e.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete e.iat:o&&(e.iat=c),typeof t.notBefore<"u"){try{e.nbf=Vt(t.notBefore,c)}catch(m){return p(m)}if(typeof e.nbf>"u")return p(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof e=="object"){try{e.exp=Vt(t.expiresIn,c)}catch(m){return p(m)}if(typeof e.exp>"u")return p(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(kt).forEach(function(m){const y=kt[m];if(typeof t[m]<"u"){if(typeof e[y]<"u")return p(new Error('Bad "options.'+m+'" option. The payload already has an "'+y+'" property.'));e[y]=t[m]}});const l=t.encoding||"utf8";if(typeof s=="function")s=s&&Ac(s),Ht.createSign({header:f,privateKey:r,payload:e,encoding:l}).once("error",s).once("done",function(m){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(f.alg)&&m.length<256)return s(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${f.alg}`));s(null,m)});else{let m=Ht.sign({header:f,payload:e,secret:r,encoding:l});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(f.alg)&&m.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${f.alg}`);return m}},Fc={decode:dn,verify:Au,sign:_c,JsonWebTokenError:nr,NotBeforeError:vn,TokenExpiredError:Sn};const Bc=Yn(Fc),Cc=Xn(async()=>{let e,r;const t=kn("token");if(typeof t.value!="string")return vr("/login");if(([e,r]=qn(()=>Jn.connection.db.collection("hotel-users").findOne({token:t.value})),e=await e,r(),e)===null)return vr("/login");try{Bc.verify(t.value,Kn().jwt_secret)}catch{return t.value=null,vr("/login")}});export{Cc as default};
