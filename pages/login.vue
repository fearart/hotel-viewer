<template>
    <UContainer class="w-60 flex justify-center dark:bg-gray-700 rounded-lg">
        <div class="p-8 flex flex-col">
            <svg id="Layer_1" fill="#5BD1D7" height="200" width="200" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1052.06 842.37"><path d="M1063.81,300.5A97.58,97.58,0,0,0,1012,233.44a111.56,111.56,0,0,0-40.15-11.19c-3.36-.31-6.7-.47-10-.52s-6.22,0-9.29.14q-9.12.38-17.93,1.49a256.68,256.68,0,0,0-34.36,6.88,296.32,296.32,0,0,0-63.76,25.56,319.47,319.47,0,0,0-102.85,88.43A348.45,348.45,0,0,0,698.28,402a395.23,395.23,0,0,0-24,62.62c-3.15,10.68-5.71,21.48-8,32.3q-1.54,7.22-2.84,14.45a81.87,81.87,0,0,1-18-9.84,44.53,44.53,0,0,1-12.76-13.85,42.71,42.71,0,0,1-5.29-18.12,81.58,81.58,0,0,1,1.82-23.23c3.47-16.61,10.78-34.12,19.72-51q3.36-6.37,7-12.66t7.58-12.5c2.62-4.13,5.34-8.2,8.08-12.25,1.37-2,2.77-4,4.17-6l4.06-5.62h0l.11-.12a20.55,20.55,0,0,0-29.07-28.94,437.87,437.87,0,0,1-35.75,28.48A416,416,0,0,1,576.5,370q-15.19,8.44-31.08,15.55c0-.39.05-.79.08-1.19a341.19,341.19,0,0,1,4.79-35.95c2.29-11.89,5.13-23.68,8.58-35.28A341.19,341.19,0,0,1,571,279a268.83,268.83,0,0,1,16-32.14c12-20.48,27-39.13,44.57-52.79A123,123,0,0,1,645.13,185c2.31-1.34,4.65-2.56,7-3.71l3.57-1.57,3.58-1.4a73.46,73.46,0,0,1,14.39-3.81,62.38,62.38,0,0,1,14.19-.69,28.57,28.57,0,0,0,5.75-.21,27.53,27.53,0,0,0-7.74-54.52l-1.46.21a141.78,141.78,0,0,0-23.7,5.47A148.45,148.45,0,0,0,639,133.88c-1.72.89-3.39,1.84-5.08,2.76L629,139.58q-4.86,3-9.44,6.23a180.69,180.69,0,0,0-17.15,14c-21.49,19.67-37.85,42.54-51.4,66.37a388.66,388.66,0,0,0-32.22,74.78,425,425,0,0,0-16.48,79.33c-.75,6.73-1.29,13.49-1.68,20.28-.05.7-.07,1.41-.11,2.11-2.69.85-5.39,1.7-8.1,2.5a430,430,0,0,1-67.57,14l3.05-20.41c.6-4.19,1.28-8.14,1.9-12.22s1.37-7.93,2.14-11.8a241.5,241.5,0,0,1,12.83-44,272.4,272.4,0,0,1,21.12-41.11,438.8,438.8,0,0,1,27.56-39.4c4.84-6.5,10.18-12.8,15.33-19.17s10.74-12.55,16.1-18.84l.27-.32a30.89,30.89,0,0,0-28.6-50.41h0l-16.84,6.23-16.2,5.9-32.09,11.53c-21.31,7.64-42.5,15.35-63.61,23.52s-42.19,16.71-62.66,27.15a386,386,0,0,0-59.61,36.34,279.77,279.77,0,0,0-27.38,23.47A209,209,0,0,0,194,324a173.32,173.32,0,0,0-18.54,33.87,162,162,0,0,0-10.24,38.24,167.85,167.85,0,0,0-.77,39.54,217.57,217.57,0,0,0,7.13,38.05c6.91,24.54,17.26,47.2,28.78,68.69l.1.22a37.1,37.1,0,1,0,61.39-41.1A233.36,233.36,0,0,1,244.53,478a182,182,0,0,1-13.62-24.85c-7.4-16.95-11.88-34.57-11.27-52-.07-2.2.24-4.34.38-6.52.11-1.08.11-2.19.3-3.26l.49-3.23.52-3.25.75-3.2.72-3.23c.29-1.06.64-2.11,1-3.18a111.76,111.76,0,0,1,10.89-24.88,142.93,142.93,0,0,1,16.84-23.1,200.15,200.15,0,0,1,21.37-20.76,273.43,273.43,0,0,1,24.5-18.42c8.61-5.71,17.55-11.09,26.73-16.15a442.52,442.52,0,0,1,57.67-26.33,398.25,398.25,0,0,1,50.33-14.84q-9.29,13.47-17.82,27.77a317.46,317.46,0,0,0-24.61,50.79,300.26,300.26,0,0,0-14.57,54.91c-3.16,18.27-4.76,35.66-6.71,52.29-.24,2-.48,3.95-.72,5.92q-5.46,0-10.91-.21c-7.6-.25-15.19-.71-22.69-1.42-3.75-.35-7.49-.76-11.17-1.24-1.84-.24-3.67-.5-5.46-.77l-2.64-.43-2.27-.41-.8-.14a20.54,20.54,0,0,0-7.47,40.4l1.95.37,1.68.3,3.27.53c2.16.33,4.29.63,6.41.9,4.25.56,8.46,1,12.66,1.41,8.41.79,16.79,1.3,25.16,1.58,2,.07,4.07.08,6.11.12-.1.52-.2,1-.29,1.55a457.94,457.94,0,0,1-29.15,93.09c-6.69,15.11-13.73,30.15-21.71,44.81l-5.87,11-6.21,10.52c-2.1,3.48-4.08,7.06-6.27,10.46l-6.68,10.09-3.33,5c-1.08,1.71-2.36,3.23-3.53,4.85l-7.14,9.6c-.6.79-1.17,1.61-1.79,2.38l-1.91,2.26-3.81,4.51-3.82,4.5c-.65.74-1.26,1.52-1.93,2.23l-2,2.08-8.11,8.34a24.29,24.29,0,0,1-2.09,2l-2.14,1.9-4.27,3.81c-1.44,1.24-2.79,2.63-4.29,3.75l-4.47,3.42-4.45,3.43-1.11.85-1.16.75-2.32,1.5a127.85,127.85,0,0,1-38.74,17.9A110.07,110.07,0,0,1,142,733a18.51,18.51,0,0,1-2.56-.34l-2.56-.43-2.56-.41a20.32,20.32,0,0,1-2.54-.49c-3.39-.83-6.78-1.53-10.12-2.66-3.37-.92-6.67-2.22-10-3.42-1.66-.61-3.27-1.38-4.91-2l-2.45-1L102,721a144.53,144.53,0,0,1-18.62-10.68c-3-2-5.83-4.12-8.58-6.28-1.34-1.09-2.71-2.18-3.94-3.27-.65-.55-1.23-1.08-1.79-1.59-.29-.27-.57-.53-.77-.73l-.33-.33-.09-.08s0,0,0,0l.05,0a32.35,32.35,0,1,0-43.17,48.18l.66.55.54.44.9.71c.61.49,1.16.9,1.71,1.3,1.11.83,2.2,1.64,3.27,2.37,2.15,1.54,4.28,2.92,6.41,4.34s4.28,2.69,6.45,4,4.32,2.54,6.51,3.74a209.4,209.4,0,0,0,27.09,12.69l3.49,1.38L85.32,779c2.38.8,4.72,1.68,7.14,2.4,4.84,1.4,9.66,2.85,14.64,3.89,4.9,1.23,10,2,15,2.8,1.25.23,2.51.39,3.79.51l3.82.4,3.82.38c1.26.14,2.54.26,3.83.28a171.88,171.88,0,0,0,60.81-7.58c19.51-6.09,37.33-15.79,53.09-27.2l3-2.1,1.49-1.06,1.41-1.14,5.6-4.58,5.57-4.59c1.87-1.53,3.49-3.24,5.25-4.85l5.15-4.92,2.58-2.46c.86-.82,1.71-1.64,2.48-2.52l9.49-10.39,2.36-2.6c.77-.87,1.47-1.79,2.2-2.69l4.36-5.41,4.37-5.39,2.18-2.7c.7-.91,1.34-1.86,2-2.78l8-11.17c1.3-1.88,2.74-3.69,3.92-5.63l3.65-5.74,7.28-11.48c2.36-3.85,4.47-7.81,6.72-11.71l6.62-11.74,6.16-11.66c2-3.9,4.14-7.74,6.11-11.69s3.88-7.92,5.89-11.84c4.09-7.81,7.7-15.94,11.51-23.93,14.9-32.16,28.1-65.89,37-101.16,1.33-5.17,2.54-10.38,3.66-15.58A472.86,472.86,0,0,0,498,446.25c-.4,3.23-.84,6.47-1.33,9.7a390.28,390.28,0,0,1-18,70.29c-4,11.52-8.54,22.93-13.4,34.2S455,582.79,449.39,593.73,437.75,615.42,431.48,626q-4.69,7.9-9.69,15.57c-1.65,2.55-3.33,5.08-5,7.56l-2.53,3.67L413,654.54l-.61.84-.51.68c-.59.79-1.17,1.64-1.69,2.5a29.29,29.29,0,1,0,50.19,30.2l.09-.15,1.5-2.5,1.33-2.28,2.56-4.48q2.52-4.46,4.91-8.9,4.78-8.9,9.31-17.84c6-11.92,11.66-24,17.07-36.21s10.4-24.56,15-37.09,9-25.18,12.85-38c7.63-25.72,13.7-52.12,16.91-79.22q1.83-15.57,2.3-31.4a450.18,450.18,0,0,0,41.24-18.8,186.16,186.16,0,0,0-7.56,21.71A133.09,133.09,0,0,0,572.82,472a104.25,104.25,0,0,0,2.69,21,94.1,94.1,0,0,0,7.54,20.68,100.1,100.1,0,0,0,27.45,33A141.48,141.48,0,0,0,644.3,566c4,1.63,8,3.09,12,4.41-.56,8.29-.94,16.66-1,25.14a312.44,312.44,0,0,0,1.6,34.33,209.16,209.16,0,0,0,6.64,35.49,154.85,154.85,0,0,0,6.26,18.06,138.77,138.77,0,0,0,9.09,17.89,108.79,108.79,0,0,0,28.79,31.56,103.68,103.68,0,0,0,19,11A111.41,111.41,0,0,0,747,750.49a135.83,135.83,0,0,0,39.74,2.8,188.92,188.92,0,0,0,36.47-6.36c5.82-1.6,11.54-3.4,17.17-5.45s11.18-4.28,16.87-6.93l2.17-1,2.07-1,1.91-1.09a62.81,62.81,0,0,0,6-4.06,99,99,0,0,0,8.44-7.27c4.81-4.62,8.77-9,12.56-13.37,7.5-8.7,14.15-17.26,20.64-25.82C920,669,928.45,657.1,936.83,645.28c-1.94,9.58-3.73,19.12-5.47,28.59-3.41,18.37-6.55,36.46-10.14,54.13a434,434,0,0,1-13.13,51.08c-5.39,16.26-12.07,31.58-20.68,45.26a147,147,0,0,1-31.49,35.89,156.72,156.72,0,0,1-19.83,13.86,186.78,186.78,0,0,1-22,11.22l-2.86,1.26-2.92,1.17-5.87,2.31c-4,1.37-7.93,2.9-12,4.12l-6.1,1.91-6.21,1.71-3.1.86-3.15.76L765.5,901c-4.24.92-8.49,1.84-12.76,2.68s-8.57,1.65-12.92,2.28-8.66,1.41-13.06,1.93-8.79,1.17-13,1.58c-17.12,1.71-34.1,2.12-50.24.4a145,145,0,0,1-23.33-4.3,102.2,102.2,0,0,1-20.85-8.06,77.89,77.89,0,0,1-30.51-27.88c-7.47-11.76-12.14-26-14.37-41.27a185.52,185.52,0,0,1-.27-47.88,230.27,230.27,0,0,1,4.13-24.36c.92-4,1.86-8,3-11.92.55-1.95,1.13-3.88,1.73-5.76.3-.94.59-1.86.91-2.74l.46-1.27.23-.57a.92.92,0,0,1,.14-.26,37.93,37.93,0,0,0,3.18-9.07,36.63,36.63,0,0,0-71.71-15l-1,5-.29,1.42-.21,1.11-.35,2.09-.64,4c-.4,2.64-.75,5.24-1.06,7.83-.62,5.18-1.19,10.3-1.6,15.43-.82,10.27-1.26,20.53-1.25,30.86.07,20.63,1.85,41.58,6.8,62.6a193.64,193.64,0,0,0,10.19,31.27,155.32,155.32,0,0,0,16.69,29.67,136.94,136.94,0,0,0,23.74,25.33,140.17,140.17,0,0,0,29,18.31,163.92,163.92,0,0,0,31.19,10.91,207.92,207.92,0,0,0,31.33,5c20.72,1.74,40.9.72,60.53-1.65,5-.6,9.68-1.33,14.48-2s9.57-1.56,14.36-2.36,9.57-1.86,14.35-2.78,9.56-2.14,14.34-3.27c9.54-2.45,19.07-5,28.54-8.26,4.74-1.48,9.44-3.33,14.15-5l7-2.85,3.5-1.45,3.47-1.57a232.91,232.91,0,0,0,27.19-14.28,203.18,203.18,0,0,0,25.46-18.12,199.67,199.67,0,0,0,41.18-47.36c11.09-17.67,19.17-36.58,25.4-55.41,3.12-9.42,5.8-18.86,8.19-28.26s4.57-18.74,6.52-28c3.92-18.57,7.25-36.9,10.73-54.88s7.25-35.63,11.7-52.83c8.83-34.38,21-67,38.92-95.77h0a25.46,25.46,0,0,0-21.83-38.79h-.3a36.5,36.5,0,0,0-13.3,2.53,49.92,49.92,0,0,0-7.49,3.67,79,79,0,0,0-9.68,6.84,161,161,0,0,0-13.65,12.75c-8.06,8.34-15.11,16.62-22,25-13.68,16.6-26.28,33.35-38.88,49.91s-24.86,33.09-37.33,48.83c-6.2,7.85-12.48,15.54-18.68,22.42-3.08,3.41-6.18,6.64-8.91,9.14a37.58,37.58,0,0,1-3.39,2.82l-.08.06-1.2.55c-3.73,1.68-7.85,3.29-12,4.72s-8.34,2.71-12.54,3.8a127.76,127.76,0,0,1-24.79,4,79.54,79.54,0,0,1-22.14-1.53,48.21,48.21,0,0,1-17.17-7.5,50.64,50.64,0,0,1-13-14,78.93,78.93,0,0,1-5.2-9.73,106.63,106.63,0,0,1-4.19-11.24,150,150,0,0,1-5.46-25.48,254.75,254.75,0,0,1-2.08-27.77c-.1-4.22-.1-8.49,0-12.77,22.57,2.45,46.18,2,69.61-3a174.92,174.92,0,0,0,34.95-11.45,162.89,162.89,0,0,0,31.86-19.06,170.48,170.48,0,0,0,46.52-55.63,200,200,0,0,0,19-53.29l.76,0A160.59,160.59,0,0,0,952.43,437a173.45,173.45,0,0,0,34.41-10.51,176.92,176.92,0,0,0,16.19-7.77,138.76,138.76,0,0,0,16.13-9.93,117.16,117.16,0,0,0,27.9-28,109.34,109.34,0,0,0,10.12-17.91,105.15,105.15,0,0,0,6.53-19.9,103.51,103.51,0,0,0,2.32-21.12A102.43,102.43,0,0,0,1063.81,300.5ZM833.42,679.18h0C833.46,679.16,833.5,679.15,833.42,679.18Zm-.54.31a1.07,1.07,0,0,1,.21-.13l.1-.06C832.91,679.5,832.74,679.59,832.88,679.49ZM889.94,390.2h0l.05,0ZM1009.07,332c-2.18,13.14-9.58,26.14-21.38,36.71a85,85,0,0,1-9.62,7.49,128.56,128.56,0,0,1-11.39,6.65,125.7,125.7,0,0,1-24.38,9.57A106.2,106.2,0,0,1,919,396.13c-.14-2.21-.32-4.45-.62-6.74a82.54,82.54,0,0,0-2-10.28,55.16,55.16,0,0,0-4.48-11.85,37.54,37.54,0,0,0-4.86-7.13,30,30,0,0,0-9.61-7.41,27.48,27.48,0,0,0-14.57-2.65c-.59.06-1.18.12-1.76.21l-1.62.3a30.6,30.6,0,0,0-3,.81,28,28,0,0,0-2.66,1c-.5.2-.83.35-.94.41l-.56.27c-6,2.87-12.28,6.2-18.8,12.54a40.39,40.39,0,0,0-9,13.06,34.45,34.45,0,0,0-2.44,9.53,33.34,33.34,0,0,0,.52,10.19A37,37,0,0,0,850.14,414a51.18,51.18,0,0,0,9.69,9.2,70.81,70.81,0,0,0,12.89,7.38,138.23,138.23,0,0,1-17.53,38.47,121.12,121.12,0,0,1-36.34,36c-14.16,9-30,14.71-47,17.66s-34.9,3.11-53.2,1.24a371.08,371.08,0,0,1,9.7-43.85,322.64,322.64,0,0,1,20.42-53.5,283.58,283.58,0,0,1,29.8-48.1,263.37,263.37,0,0,1,85.1-72,249.8,249.8,0,0,1,51.62-20.46A198.5,198.5,0,0,1,942,280.82c4.41-.56,8.78-1,13.07-1.18,2.11-.1,4.34-.15,6.26-.14s3.73.09,5.53.24c14.53,1.19,26.26,7,33.83,16.43a41.3,41.3,0,0,1,8,16.49A49.16,49.16,0,0,1,1009.07,332Z" transform="translate(-13.97 -118.82)"/></svg>
                <UInput color="white" variant="outline" placeholder="Login" v-model="login" class="pt-4"></UInput>
                <UInput color="white" variant="outline" placeholder="Password" v-model="password" class="pt-4" type="password"></UInput>
                <UButton block label="Login" @click="onLoginFormSubmit" class="mt-4 align-middle self-center"></UButton>
            </div>
        </UContainer>
    </template>
<script setup>
import axios from 'axios';
const login = ref('')
const password = ref('')
const isOpen = ref(true)
const toast = useToast()

import { reloadNuxtApp } from "nuxt/app";
const onLoginFormSubmit = () => {
    axios.post('/api/users/login', {
        login: login.value.replaceAll(" ",''),
        password: password.value.replaceAll(" ",'')
    }).then((response) => {
        console.log(response)
        if (response.status === 202) {
            useCookie('token', response.data.token)
            navigateTo('/')
            reloadNuxtApp({
                path: "/",
                ttl: 1000, // default 10000
            });
            isOpen.value = false
        }
        else {
            toast.add({
                icon: "i-heroicons-exclamation",
                color: "red",
                description: "Wrong login or password.",
                id: "onLoginFormSubmit",
                timeout: 3000,
                title: "Login",
            })
        }
    })
}
</script>